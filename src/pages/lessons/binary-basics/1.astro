---
const title = "2é€²æ•°ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ã®åŸºç¤";
const description = "ã‚¢ãƒŠãƒ­ã‚°ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ã®é•ã„ã‹ã‚‰2é€²æ•°ã®æ¦‚å¿µã¾ã§ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®åŸºæœ¬ã‚’å­¦ç¿’ã—ã¾ã™";
const chapter = "binary-basics";
const slideNumber = 1;
const totalSlides = 8;
const estimatedTime = 15;

const slides = [
  {
    id: 1,
    title: "å­¦ç¿’ç›®æ¨™",
    content: `
      <div>
        <h1>2é€²æ•°ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ã®åŸºç¤</h1>
        <h2>ğŸ¯ å­¦ç¿’ç›®æ¨™</h2>
        <p>ã“ã®å˜å…ƒã§ã¯ã€ã‚¢ãƒŠãƒ­ã‚°ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ã®é•ã„ã‚’ç†è§£ã—ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒãªãœ2é€²æ•°ã‚’ä½¿ã†ã®ã‹ã‚’å­¦ç¿’ã—ã¾ã™ã€‚</p>
        <div style="margin-top: 2rem; padding: 1.5rem; background: #f0f9ff; border-radius: 0.75rem; border: 1px solid #0ea5e9;">
          <h3 style="color: #0ea5e9; margin-bottom: 1rem;">ğŸ“š ã“ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§å­¦ã¶ã“ã¨</h3>
          <ul style="list-style: none; padding: 0;">
            <li style="margin-bottom: 0.5rem;">âœ“ ã‚¢ãƒŠãƒ­ã‚°ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ã®é•ã„</li>
            <li style="margin-bottom: 0.5rem;">âœ“ ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒ2é€²æ•°ã‚’ä½¿ã†ç†ç”±</li>
            <li style="margin-bottom: 0.5rem;">âœ“ 2é€²æ•°ã‹ã‚‰10é€²æ•°ã¸ã®å¤‰æ›æ–¹æ³•</li>
            <li style="margin-bottom: 0.5rem;">âœ“ ä½ã®æ¦‚å¿µï¼ˆ8,4,2,1ã®ä½ï¼‰</li>
            <li style="margin-bottom: 0.5rem;">âœ“ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªå¤‰æ›ãƒ„ãƒ¼ãƒ«ã®ä½¿ã„æ–¹</li>
            <li>âœ“ 2é€²æ•°ã®å®Ÿç”Ÿæ´»ã§ã®å¿œç”¨</li>
          </ul>
        </div>
        <div style="background: #fef3c7; padding: 1.5rem; border-radius: 0.75rem; margin-top: 2rem; border: 1px solid #f59e0b;">
          <h3>â±ï¸ æ¨å®šå­¦ç¿’æ™‚é–“</h3>
          <p style="font-size: 1.1rem; font-weight: 600;">ç´„15åˆ†</p>
        </div>
      </div>
    `
  },
  {
    id: 2,
    title: "ã‚¢ãƒŠãƒ­ã‚°ã¨ãƒ‡ã‚¸ã‚¿ãƒ«",
    content: `
      <div>
        <h1>ã‚¢ãƒŠãƒ­ã‚°ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ã®é•ã„</h1>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 2rem 0;">
          <div style="background: #f0fdf4; padding: 2rem; border-radius: 1rem; border: 1px solid #22c55e;">
            <h2 style="color: #22c55e; margin-bottom: 1rem;">ğŸ“¡ ã‚¢ãƒŠãƒ­ã‚°</h2>
            <p style="margin-bottom: 1rem;">é€£ç¶šçš„ã«å¤‰åŒ–ã™ã‚‹é‡</p>
            <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin: 1rem 0;">
              <div style="height: 60px; background: linear-gradient(90deg, #22c55e 0%, #fbbf24 50%, #ef4444 100%); border-radius: 0.25rem; position: relative;">
                <div style="position: absolute; bottom: -20px; left: 0; font-size: 0.75rem;">0</div>
                <div style="position: absolute; bottom: -20px; right: 0; font-size: 0.75rem;">100</div>
                <div style="position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%); font-size: 0.75rem;">50</div>
              </div>
            </div>
            <p style="font-size: 0.9rem; color: #374151;">ä¾‹ï¼šæ¸©åº¦ã€éŸ³é‡ã€è‰²ã®æ¿ƒã•</p>
          </div>
          
          <div style="background: #eff6ff; padding: 2rem; border-radius: 1rem; border: 1px solid #3b82f6;">
            <h2 style="color: #3b82f6; margin-bottom: 1rem;">ğŸ”¢ ãƒ‡ã‚¸ã‚¿ãƒ«</h2>
            <p style="margin-bottom: 1rem;">æ®µéšçš„ã«å¤‰åŒ–ã™ã‚‹é‡</p>
            <div style="background: white; padding: 1rem; border-radius: 0.5rem; margin: 1rem 0;">
              <div style="display: flex; gap: 4px; height: 60px; align-items: end;">
                <div style="width: 15px; height: 20%; background: #3b82f6; border-radius: 2px;"></div>
                <div style="width: 15px; height: 40%; background: #3b82f6; border-radius: 2px;"></div>
                <div style="width: 15px; height: 60%; background: #3b82f6; border-radius: 2px;"></div>
                <div style="width: 15px; height: 80%; background: #3b82f6; border-radius: 2px;"></div>
                <div style="width: 15px; height: 100%; background: #3b82f6; border-radius: 2px;"></div>
              </div>
            </div>
            <p style="font-size: 0.9rem; color: #374151;">ä¾‹ï¼šéšæ®µã€ãƒ‡ã‚¸ã‚¿ãƒ«æ™‚è¨ˆã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿</p>
          </div>
        </div>
        
        <div style="background: #fdf2f8; padding: 2rem; border-radius: 1rem; margin-top: 2rem; border: 1px solid #ec4899;">
          <h3 style="color: #ec4899;">ğŸ’¡ èº«è¿‘ãªä¾‹ã§è€ƒãˆã¦ã¿ã‚ˆã†</h3>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
            <div>
              <strong>ã‚¢ãƒŠãƒ­ã‚°æ™‚è¨ˆ</strong>
              <p style="font-size: 0.9rem;">é‡ãŒæ»‘ã‚‰ã‹ã«å‹•ã</p>
            </div>
            <div>
              <strong>ãƒ‡ã‚¸ã‚¿ãƒ«æ™‚è¨ˆ</strong>
              <p style="font-size: 0.9rem;">æ•°å­—ãŒ1ç§’ãšã¤å¤‰ã‚ã‚‹</p>
            </div>
          </div>
        </div>
      </div>
    `
  },
  {
    id: 3,
    title: "ãªãœ2é€²æ•°ãªã®ã‹",
    content: `
      <div>
        <h1>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒ2é€²æ•°ã‚’ä½¿ã†ç†ç”±</h1>
        <div style="text-align: center; margin: 2rem 0;">
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 1rem;">
            <h2 style="color: white; margin-bottom: 1rem;">âš¡ é›»æ°—ã®çŠ¶æ…‹ã¯2ã¤ã ã‘</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 2rem;">
              <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 0.75rem;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem;">ğŸ’¡</div>
                <h3 style="color: white;">ONï¼ˆã‚ªãƒ³ï¼‰</h3>
                <p style="color: rgba(255,255,255,0.9);">é›»æµãŒæµã‚Œã¦ã„ã‚‹ = 1</p>
              </div>
              <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 0.75rem;">
                <div style="font-size: 3rem; margin-bottom: 0.5rem;">âš«</div>
                <h3 style="color: white;">OFFï¼ˆã‚ªãƒ•ï¼‰</h3>
                <p style="color: rgba(255,255,255,0.9);">é›»æµãŒæµã‚Œã¦ã„ãªã„ = 0</p>
              </div>
            </div>
          </div>
        </div>
        
        <div style="background: #f0fdf4; padding: 2rem; border-radius: 1rem; margin: 2rem 0; border: 1px solid #22c55e;">
          <h3 style="color: #22c55e;">ğŸ” èº«è¿‘ãªä¾‹</h3>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
            <div style="text-align: center; padding: 1rem;">
              <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ”¦</div>
              <strong>æ‡ä¸­é›»ç¯</strong>
              <p style="font-size: 0.9rem;">ç‚¹ã„ã¦ã„ã‚‹ / æ¶ˆãˆã¦ã„ã‚‹</p>
            </div>
            <div style="text-align: center; padding: 1rem;">
              <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸš¦</div>
              <strong>ä¿¡å·æ©Ÿ</strong>
              <p style="font-size: 0.9rem;">èµ¤ãŒç‚¹ç¯ / æ¶ˆç¯</p>
            </div>
            <div style="text-align: center; padding: 1rem;">
              <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ’¡</div>
              <strong>é›»çƒ</strong>
              <p style="font-size: 0.9rem;">æ˜ã‚‹ã„ / æš—ã„</p>
            </div>
          </div>
        </div>
        
        <div style="background: #fef3c7; padding: 2rem; border-radius: 1rem; border: 1px solid #f59e0b;">
          <h3 style="color: #f59e0b;">âš™ï¸ ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®ä¸­ã§ã¯</h3>
          <p>ä½•å„„å€‹ã‚‚ã®å°ã•ãªã‚¹ã‚¤ãƒƒãƒï¼ˆãƒˆãƒ©ãƒ³ã‚¸ã‚¹ã‚¿ï¼‰ãŒ ON ã¨ OFF ã‚’ç¹°ã‚Šè¿”ã—ã¦ã€ã™ã¹ã¦ã®è¨ˆç®—ã‚„å‡¦ç†ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚</p>
          <p style="margin-top: 1rem; font-weight: 600;">ã ã‹ã‚‰2é€²æ•°ï¼ˆ0ã¨1ï¼‰ãŒã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®è¨€èªãªã®ã§ã™ï¼</p>
        </div>
      </div>
    `
  },
  {
    id: 4,
    title: "2é€²æ•°ã®ä½ã®æ¦‚å¿µ",
    content: `
      <div>
        <h1>2é€²æ•°ã®ä½ã‚’ç†è§£ã—ã‚ˆã†</h1>
        <p>2é€²æ•°ã§ã¯ã€å„ä½ã®å€¤ãŒå³ã‹ã‚‰ã€Œ1, 2, 4, 8, 16...ã€ã¨2å€ãšã¤å¢—ãˆã¦ã„ãã¾ã™ã€‚</p>
        
        <div style="background: #f8fafc; padding: 2rem; border-radius: 1rem; margin: 2rem 0; border: 1px solid #e2e8f0;">
          <h3>ğŸ“Š ä½ã®å€¤ï¼ˆ4æ¡ã®å ´åˆï¼‰</h3>
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin: 2rem 0;">
            <div style="background: #fdf2f8; padding: 1.5rem; border-radius: 0.75rem; text-align: center; border: 2px solid #ec4899;">
              <div style="font-size: 2rem; font-weight: bold; color: #ec4899;">8</div>
              <div style="font-size: 0.875rem; color: #6b7280;">8ã®ä½</div>
              <div style="margin-top: 0.5rem; font-size: 3rem;">â¬œ</div>
            </div>
            <div style="background: #fef3c7; padding: 1.5rem; border-radius: 0.75rem; text-align: center; border: 2px solid #f59e0b;">
              <div style="font-size: 2rem; font-weight: bold; color: #f59e0b;">4</div>
              <div style="font-size: 0.875rem; color: #6b7280;">4ã®ä½</div>
              <div style="margin-top: 0.5rem; font-size: 3rem;">â¬œ</div>
            </div>
            <div style="background: #dcfce7; padding: 1.5rem; border-radius: 0.75rem; text-align: center; border: 2px solid #22c55e;">
              <div style="font-size: 2rem; font-weight: bold; color: #22c55e;">2</div>
              <div style="font-size: 0.875rem; color: #6b7280;">2ã®ä½</div>
              <div style="margin-top: 0.5rem; font-size: 3rem;">â¬œ</div>
            </div>
            <div style="background: #dbeafe; padding: 1.5rem; border-radius: 0.75rem; text-align: center; border: 2px solid #3b82f6;">
              <div style="font-size: 2rem; font-weight: bold; color: #3b82f6;">1</div>
              <div style="font-size: 0.875rem; color: #6b7280;">1ã®ä½</div>
              <div style="margin-top: 0.5rem; font-size: 3rem;">â¬œ</div>
            </div>
          </div>
        </div>
        
        <div style="background: #f0f9ff; padding: 2rem; border-radius: 1rem; border: 1px solid #0ea5e9;">
          <h3 style="color: #0ea5e9;">ğŸ’¡ å…·ä½“ä¾‹ï¼š2é€²æ•°ã€Œ1101ã€ã‚’10é€²æ•°ã«å¤‰æ›</h3>
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin: 2rem 0;">
            <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
              <div style="font-size: 1.5rem; color: #ec4899; font-weight: bold;">8ã®ä½</div>
              <div style="font-size: 3rem; margin: 0.5rem 0; color: #ec4899;">1</div>
              <div style="font-size: 1rem;">8 Ã— 1 = 8</div>
            </div>
            <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
              <div style="font-size: 1.5rem; color: #f59e0b; font-weight: bold;">4ã®ä½</div>
              <div style="font-size: 3rem; margin: 0.5rem 0; color: #f59e0b;">1</div>
              <div style="font-size: 1rem;">4 Ã— 1 = 4</div>
            </div>
            <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
              <div style="font-size: 1.5rem; color: #22c55e; font-weight: bold;">2ã®ä½</div>
              <div style="font-size: 3rem; margin: 0.5rem 0; color: #22c55e;">0</div>
              <div style="font-size: 1rem;">2 Ã— 0 = 0</div>
            </div>
            <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
              <div style="font-size: 1.5rem; color: #3b82f6; font-weight: bold;">1ã®ä½</div>
              <div style="font-size: 3rem; margin: 0.5rem 0; color: #3b82f6;">1</div>
              <div style="font-size: 1rem;">1 Ã— 1 = 1</div>
            </div>
          </div>
          <div style="text-align: center; background: white; padding: 1.5rem; border-radius: 0.75rem; margin-top: 1rem;">
            <h4 style="color: #111827; margin-bottom: 1rem;">è¨ˆç®—ï¼š8 + 4 + 0 + 1 = 13</h4>
            <p style="font-size: 1.25rem; font-weight: bold;">2é€²æ•°ã€Œ1101ã€= 10é€²æ•°ã€Œ13ã€</p>
          </div>
        </div>
      </div>
    `
  },
  {
    id: 5,
    title: "ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–å¤‰æ›ãƒ„ãƒ¼ãƒ«",
    content: `
      <div>
        <h1>2é€²æ•°å¤‰æ›ãƒ„ãƒ¼ãƒ«</h1>
        <p>ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€2é€²æ•°ã®å„ä½ã®ON/OFFã‚’åˆ‡ã‚Šæ›¿ãˆã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
        
        <div style="background: #f8fafc; padding: 2rem; border-radius: 1rem; margin: 2rem 0; border: 1px solid #e2e8f0;">
          <div id="binary-converter">
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 2rem;">
              <div style="text-align: center;">
                <div style="background: #fdf2f8; padding: 1rem; border-radius: 0.75rem; border: 2px solid #ec4899;">
                  <div style="font-size: 1.5rem; font-weight: bold; color: #ec4899;">8ã®ä½</div>
                  <button onclick="toggleBit(3)" id="bit-3" style="margin: 1rem 0; font-size: 3rem; background: #ef4444; color: white; border: none; border-radius: 0.5rem; padding: 1rem; cursor: pointer; width: 100%;">0</button>
                  <div id="calc-3" style="font-size: 1rem;">8 Ã— 0 = 0</div>
                </div>
              </div>
              <div style="text-align: center;">
                <div style="background: #fef3c7; padding: 1rem; border-radius: 0.75rem; border: 2px solid #f59e0b;">
                  <div style="font-size: 1.5rem; font-weight: bold; color: #f59e0b;">4ã®ä½</div>
                  <button onclick="toggleBit(2)" id="bit-2" style="margin: 1rem 0; font-size: 3rem; background: #ef4444; color: white; border: none; border-radius: 0.5rem; padding: 1rem; cursor: pointer; width: 100%;">0</button>
                  <div id="calc-2" style="font-size: 1rem;">4 Ã— 0 = 0</div>
                </div>
              </div>
              <div style="text-align: center;">
                <div style="background: #dcfce7; padding: 1rem; border-radius: 0.75rem; border: 2px solid #22c55e;">
                  <div style="font-size: 1.5rem; font-weight: bold; color: #22c55e;">2ã®ä½</div>
                  <button onclick="toggleBit(1)" id="bit-1" style="margin: 1rem 0; font-size: 3rem; background: #ef4444; color: white; border: none; border-radius: 0.5rem; padding: 1rem; cursor: pointer; width: 100%;">0</button>
                  <div id="calc-1" style="font-size: 1rem;">2 Ã— 0 = 0</div>
                </div>
              </div>
              <div style="text-align: center;">
                <div style="background: #dbeafe; padding: 1rem; border-radius: 0.75rem; border: 2px solid #3b82f6;">
                  <div style="font-size: 1.5rem; font-weight: bold; color: #3b82f6;">1ã®ä½</div>
                  <button onclick="toggleBit(0)" id="bit-0" style="margin: 1rem 0; font-size: 3rem; background: #ef4444; color: white; border: none; border-radius: 0.5rem; padding: 1rem; cursor: pointer; width: 100%;">0</button>
                  <div id="calc-0" style="font-size: 1rem;">1 Ã— 0 = 0</div>
                </div>
              </div>
            </div>
            
            <div style="text-align: center; background: white; padding: 2rem; border-radius: 1rem; margin-top: 2rem; border: 2px solid #3b82f6;">
              <h3>çµæœ</h3>
              <div style="margin: 1rem 0;">
                <span style="font-size: 1.5rem; font-weight: bold;">2é€²æ•°ï¼š</span>
                <span id="binary-result" style="font-size: 2rem; font-weight: bold; color: #3b82f6; font-family: monospace;">0000</span>
              </div>
              <div style="margin: 1rem 0;">
                <span style="font-size: 1.5rem; font-weight: bold;">10é€²æ•°ï¼š</span>
                <span id="decimal-result" style="font-size: 2rem; font-weight: bold; color: #ec4899;">0</span>
              </div>
              <div id="calculation" style="margin-top: 1rem; color: #6b7280;">0 + 0 + 0 + 0 = 0</div>
            </div>
          </div>
        </div>
        
        <div style="background: #fef3c7; padding: 1.5rem; border-radius: 0.75rem; margin-top: 2rem; border: 1px solid #f59e0b;">
          <h3>ğŸ¯ ãƒãƒ£ãƒ¬ãƒ³ã‚¸</h3>
          <p>ä»¥ä¸‹ã®æ•°å­—ã‚’2é€²æ•°ã§è¡¨ç¾ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š</p>
          <ul style="margin-top: 1rem;">
            <li>5 â†’ ï¼Ÿ</li>
            <li>9 â†’ ï¼Ÿ</li>
            <li>15 â†’ ï¼Ÿ</li>
          </ul>
        </div>
      </div>
    `
  },
  {
    id: 6,
    title: "10é€²æ•°ã‹ã‚‰2é€²æ•°ã¸ã®å¤‰æ›",
    content: `
      <div>
        <h1>10é€²æ•°ã‹ã‚‰2é€²æ•°ã¸ã®å¤‰æ›æ–¹æ³•</h1>
        <p style="text-align: center; font-size: 1.2rem; margin-bottom: 3rem; color: #374151;">
          10é€²æ•°ã‚’2é€²æ•°ã«å¤‰æ›ã™ã‚‹2ã¤ã®ä»£è¡¨çš„ãªæ–¹æ³•ã‚’å­¦ç¿’ã—ã¾ã—ã‚‡ã†
        </p>
        
        <!-- æ–¹æ³•1: å‰²ã‚Šç®—æ³• -->
        <div style="background: #f0f9ff; padding: 2rem; border-radius: 1rem; margin: 2rem 0; border: 1px solid #3b82f6;">
          <h2 style="color: #3b82f6; margin-bottom: 1.5rem;">ğŸ“Š æ–¹æ³•1: å‰²ã‚Šç®—æ³•ï¼ˆ2ã§å‰²ã‚Šç¶šã‘ã‚‹ï¼‰</h2>
          <p style="margin-bottom: 1.5rem;">2ã§å‰²ã‚Šç¶šã‘ã¦ã€ä½™ã‚Šã‚’ä¸‹ã‹ã‚‰èª­ã¿ä¸Šã’ã‚‹æ–¹æ³•ã§ã™ã€‚</p>
          
          <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; margin: 1rem 0;">
            <h3 style="color: #1f2937; margin-bottom: 1rem;">ä¾‹ï¼š10é€²æ•°ã®13ã‚’2é€²æ•°ã«å¤‰æ›</h3>
            
            <div style="font-family: 'Courier New', monospace; font-size: 1.1rem; line-height: 1.8; background: #f8fafc; padding: 2rem; border-radius: 0.5rem; margin: 1rem 0; display: flex; flex-direction: column; align-items: center;">
              <div style="margin-bottom: 1rem;">
                <span style="color: #3b82f6; font-weight: bold;">2)</span><span style="text-decoration: overline;">13</span> = 6 ãƒ»ãƒ»ãƒ» <span style="background: #fef3c7; padding: 0.2rem 0.5rem; border-radius: 0.25rem; color: #92400e; font-weight: bold;">1</span> â†â‘£
              </div>
              <div style="margin-bottom: 1rem;">
                <span style="color: #3b82f6; font-weight: bold;">2)</span><span style="text-decoration: overline;"> 6</span> = 3 ãƒ»ãƒ»ãƒ» <span style="background: #fef3c7; padding: 0.2rem 0.5rem; border-radius: 0.25rem; color: #92400e; font-weight: bold;">0</span> â†â‘¢
              </div>
              <div style="margin-bottom: 1rem;">
                <span style="color: #3b82f6; font-weight: bold;">2)</span><span style="text-decoration: overline;"> 3</span> = 1 ãƒ»ãƒ»ãƒ» <span style="background: #fef3c7; padding: 0.2rem 0.5rem; border-radius: 0.25rem; color: #92400e; font-weight: bold;">1</span> â†â‘¡
              </div>
              <div style="margin-bottom: 1rem;">
                <span style="color: #3b82f6; font-weight: bold;">2)</span><span style="text-decoration: overline;"> 1</span> = 0 ãƒ»ãƒ»ãƒ» <span style="background: #fef3c7; padding: 0.2rem 0.5rem; border-radius: 0.25rem; color: #92400e; font-weight: bold;">1</span> â†â‘ 
              </div>
            </div>
            
            <div style="background: #f0fdf4; padding: 1rem; border-radius: 0.5rem; margin-top: 1.5rem;">
              <div style="text-align: center; margin-bottom: 1rem; color: #166534; font-weight: bold;">ä½™ã‚Šã‚’ä¸‹ã‹ã‚‰èª­ã¿ä¸Šã’ã‚‹</div>
              <div style="text-align: center; font-family: 'Courier New', monospace; font-size: 1.5rem;">
                â‘ â‘¡â‘¢â‘£ â†’ 
                <span style="background: #22c55e; color: white; padding: 0.3rem 0.6rem; border-radius: 0.5rem; margin-left: 0.5rem; font-weight: bold;">1101â‚‚</span>
              </div>
            </div>
          </div>
        </div>
        
        <!-- æ–¹æ³•2: å¼•ãç®—æ³• -->
        <div style="background: #f0fdf4; padding: 2rem; border-radius: 1rem; margin: 2rem 0; border: 1px solid #22c55e;">
          <h2 style="color: #22c55e; margin-bottom: 1.5rem;">ğŸ¯ æ–¹æ³•2: å¼•ãç®—æ³•ï¼ˆ2ã®ç´¯ä¹—ã§å¼•ãï¼‰</h2>
          <p style="margin-bottom: 1.5rem;">å¤§ããª2ã®ç´¯ä¹—ã‹ã‚‰é †ç•ªã«å¼•ã„ã¦ã„ãæ–¹æ³•ã§ã™ã€‚</p>
          
          <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; margin: 1rem 0;">
            <h3 style="color: #1f2937; margin-bottom: 1rem;">ä¾‹ï¼š10é€²æ•°ã®13ã‚’2é€²æ•°ã«å¤‰æ›</h3>
            
            <!-- 2ã®ç´¯ä¹—è¡¨ -->
            <div style="background: #f8fafc; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
              <h4 style="text-align: center; margin-bottom: 1rem; color: #475569;">2ã®ç´¯ä¹—è¡¨</h4>
              <div style="display: flex; justify-content: center; gap: 1rem; font-family: monospace; align-items: end;">
                <div style="text-align: center;">
                  <div style="background: #e2e8f0; padding: 0.5rem; border-radius: 0.25rem; margin-bottom: 0.25rem; height: 2.5rem; display: flex; align-items: center; justify-content: center;">2Â³</div>
                  <div>8</div>
                </div>
                <div style="text-align: center;">
                  <div style="background: #e2e8f0; padding: 0.5rem; border-radius: 0.25rem; margin-bottom: 0.25rem; height: 2.5rem; display: flex; align-items: center; justify-content: center;">2Â²</div>
                  <div>4</div>
                </div>
                <div style="text-align: center;">
                  <div style="background: #e2e8f0; padding: 0.5rem; border-radius: 0.25rem; margin-bottom: 0.25rem; height: 2.5rem; display: flex; align-items: center; justify-content: center;">2Â¹</div>
                  <div>2</div>
                </div>
                <div style="text-align: center;">
                  <div style="background: #e2e8f0; padding: 0.5rem; border-radius: 0.25rem; margin-bottom: 0.25rem; height: 2.5rem; display: flex; align-items: center; justify-content: center;">2â°</div>
                  <div>1</div>
                </div>
              </div>
            </div>
            
            <!-- è¨ˆç®—æ‰‹é † -->
            <div style="background: #fef3c7; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1rem;">
              <h4 style="color: #92400e; margin-bottom: 1rem;">è¨ˆç®—æ‰‹é †</h4>
              <table style="width: 100%; max-width: 300px; margin: 0 auto; font-family: 'Courier New', monospace; border-collapse: collapse;">
                <tr style="line-height: 1.8;">
                  <td style="text-align: right; width: 8%; padding-right: 0.2rem;">13</td>
                  <td style="text-align: center; width: 4%; padding: 0 0.1rem;">â‰¥</td>
                  <td style="text-align: right; width: 6%; padding-right: 0.1rem;">8</td>
                  <td style="text-align: left; width: 10%; padding-left: 0.2rem;">(2Â³)</td>
                  <td style="text-align: center; width: 4%; padding: 0 0.2rem;">â†’</td>
                  <td style="text-align: center; width: 4%;"><span style="color: #22c55e;">â—‹</span></td>
                  <td style="text-align: center; width: 4%; padding: 0 0.2rem;">â†’</td>
                  <td style="text-align: right; width: 8%; padding-right: 0.1rem;">13</td>
                  <td style="text-align: center; width: 3%; padding: 0 0.1rem;">-</td>
                  <td style="text-align: right; width: 6%; padding-right: 0.1rem;">8</td>
                  <td style="text-align: center; width: 3%; padding: 0 0.2rem;">=</td>
                  <td style="text-align: left; width: 6%; padding-left: 0.2rem;">5</td>
                </tr>
                <tr style="line-height: 1.8;">
                  <td style="text-align: right; width: 8%; padding-right: 0.2rem;">5</td>
                  <td style="text-align: center; width: 4%; padding: 0 0.1rem;">â‰¥</td>
                  <td style="text-align: right; width: 6%; padding-right: 0.1rem;">4</td>
                  <td style="text-align: left; width: 10%; padding-left: 0.2rem;">(2Â²)</td>
                  <td style="text-align: center; width: 4%; padding: 0 0.2rem;">â†’</td>
                  <td style="text-align: center; width: 4%;"><span style="color: #22c55e;">â—‹</span></td>
                  <td style="text-align: center; width: 4%; padding: 0 0.2rem;">â†’</td>
                  <td style="text-align: right; width: 8%; padding-right: 0.1rem;">5</td>
                  <td style="text-align: center; width: 3%; padding: 0 0.1rem;">-</td>
                  <td style="text-align: right; width: 6%; padding-right: 0.1rem;">4</td>
                  <td style="text-align: center; width: 3%; padding: 0 0.2rem;">=</td>
                  <td style="text-align: left; width: 6%; padding-left: 0.2rem;">1</td>
                </tr>
                <tr style="line-height: 1.8;">
                  <td style="text-align: right; width: 8%; padding-right: 0.2rem;">1</td>
                  <td style="text-align: center; width: 4%; padding: 0 0.1rem;">â‰¥</td>
                  <td style="text-align: right; width: 6%; padding-right: 0.1rem;">2</td>
                  <td style="text-align: left; width: 10%; padding-left: 0.2rem;">(2Â¹)</td>
                  <td style="text-align: center; width: 4%; padding: 0 0.2rem;">â†’</td>
                  <td style="text-align: center; width: 4%;"><span style="color: #ef4444;">Ã—</span></td>
                  <td style="text-align: center; width: 4%; padding: 0 0.2rem;">â†’</td>
                  <td style="text-align: right; width: 8%; padding-right: 0.1rem;">1</td>
                  <td style="text-align: center; width: 3%; padding: 0 0.1rem;">-</td>
                  <td style="text-align: right; width: 6%; padding-right: 0.1rem;">0</td>
                  <td style="text-align: center; width: 3%; padding: 0 0.2rem;">=</td>
                  <td style="text-align: left; width: 6%; padding-left: 0.2rem;">1</td>
                </tr>
                <tr style="line-height: 1.8;">
                  <td style="text-align: right; width: 8%; padding-right: 0.2rem;">1</td>
                  <td style="text-align: center; width: 4%; padding: 0 0.1rem;">â‰¥</td>
                  <td style="text-align: right; width: 6%; padding-right: 0.1rem;">1</td>
                  <td style="text-align: left; width: 10%; padding-left: 0.2rem;">(2â°)</td>
                  <td style="text-align: center; width: 4%; padding: 0 0.2rem;">â†’</td>
                  <td style="text-align: center; width: 4%;"><span style="color: #22c55e;">â—‹</span></td>
                  <td style="text-align: center; width: 4%; padding: 0 0.2rem;">â†’</td>
                  <td style="text-align: right; width: 8%; padding-right: 0.1rem;">1</td>
                  <td style="text-align: center; width: 3%; padding: 0 0.1rem;">-</td>
                  <td style="text-align: right; width: 6%; padding-right: 0.1rem;">1</td>
                  <td style="text-align: center; width: 3%; padding: 0 0.2rem;">=</td>
                  <td style="text-align: left; width: 6%; padding-left: 0.2rem;">0</td>
                </tr>
              </table>
            </div>
            
            <div style="text-align: center; margin-top: 1.5rem;">
              <div style="background: #dbeafe; padding: 1rem; border-radius: 0.5rem; display: inline-block;">
                <div style="color: #1e40af; margin-bottom: 0.5rem;">2é€²æ•°ã®å„æ¡</div>
                <div style="font-family: monospace; font-size: 1.5rem; font-weight: bold;">
                  <span style="color: #22c55e;">1</span>
                  <span style="color: #22c55e;">1</span>
                  <span style="color: #ef4444;">0</span>
                  <span style="color: #22c55e;">1</span>
                </div>
                <div style="font-size: 1.3rem; font-weight: bold; color: #22c55e; margin-top: 0.5rem;">
                  ç­”ãˆ: 1101â‚‚
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- ã©ã¡ã‚‰ã®æ–¹æ³•ã‚’ä½¿ã†ã‹ -->
        <div style="background: #fdf2f8; padding: 2rem; border-radius: 1rem; margin: 2rem 0; border: 1px solid #ec4899;">
          <h2 style="color: #ec4899; margin-bottom: 1rem;">ğŸ’¡ ã©ã¡ã‚‰ã®æ–¹æ³•ã‚’ä½¿ã†ã¹ãï¼Ÿ</h2>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
            <div style="background: white; padding: 1.5rem; border-radius: 0.75rem;">
              <h3 style="color: #3b82f6;">å‰²ã‚Šç®—æ³•</h3>
              <p style="font-size: 0.9rem; color: #6b7280;">âœ… æ©Ÿæ¢°çš„ã«è¨ˆç®—ã§ãã‚‹<br>âœ… å¤§ããªæ•°ã§ã‚‚ç¢ºå®Ÿ<br>âš ï¸ è¨ˆç®—ã‚¹ãƒ†ãƒƒãƒ—ãŒå¤šã„</p>
            </div>
            <div style="background: white; padding: 1.5rem; border-radius: 0.75rem;">
              <h3 style="color: #22c55e;">å¼•ãç®—æ³•</h3>
              <p style="font-size: 0.9rem; color: #6b7280;">âœ… 2ã®ç´¯ä¹—ã«æ…£ã‚Œã‚‹ã¨é€Ÿã„<br>âœ… ä½ã®æ¦‚å¿µãŒç†è§£ã—ã‚„ã™ã„<br>âš ï¸ 2ã®ç´¯ä¹—ã‚’è¦šãˆã‚‹å¿…è¦</p>
            </div>
          </div>
        </div>
      </div>
    `
  },
  {
    id: 7,
    title: "ç·´ç¿’å•é¡Œ",
    content: `
      <div>
        <h1>2é€²æ•°å¤‰æ› - å•é¡Œæ¼”ç¿’</h1>
        <div id="quiz-container">
          <div id="quiz-intro" style="text-align: center;">
            <p style="margin-bottom: 2rem;">20å•ã®å³é¸ã•ã‚ŒãŸå•é¡Œã§2é€²æ•°å¤‰æ›ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ã‚‡ã†ï¼</p>
            
            <div style="background: #f0f9ff; padding: 2rem; border-radius: 1rem; margin: 2rem 0; border: 1px solid #0ea5e9;">
              <h3 style="color: #0ea5e9; margin-bottom: 1rem;">ğŸ“ å•é¡Œæ¼”ç¿’ã®ç‰¹å¾´</h3>
              <ul style="margin-top: 1rem; list-style: none; padding: 0; text-align: left;">
                <li style="margin-bottom: 0.5rem;">âœ“ 2é€²æ•° â†” 10é€²æ•°ã®å¤‰æ›å•é¡Œ</li>
                <li style="margin-bottom: 0.5rem;">âœ“ æ®µéšçš„ãªé›£æ˜“åº¦è¨­å®š</li>
                <li style="margin-bottom: 0.5rem;">âœ“ è©³ç´°ãªè§£èª¬ã¨ãƒ’ãƒ³ãƒˆä»˜ã</li>
                <li>âœ“ æ­£ç­”ç‡ã®è¨˜éŒ²</li>
              </ul>
            </div>
            
            <button onclick="startEmbeddedQuiz()" style="
              background: linear-gradient(135deg, #3b82f6, #1d4ed8); 
              color: white; 
              padding: 1.5rem 3rem; 
              border-radius: 1rem; 
              font-size: 1.25rem; 
              font-weight: 600; 
              border: none;
              cursor: pointer;
              box-shadow: 0 10px 25px -3px rgba(59, 130, 246, 0.3);
              transition: transform 0.2s ease;
            " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
              ğŸ¯ å•é¡Œæ¼”ç¿’ã‚’é–‹å§‹ã™ã‚‹
            </button>
          </div>
          
          <div id="quiz-app" style="display: none;">
            <!-- åå‰å…¥åŠ› -->
            <div id="name-input-section" style="text-align: center; padding: 2rem;">
              <h3 style="margin-bottom: 1rem;">ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</h3>
              <p style="color: #6b7280; margin-bottom: 2rem;">ä¿®äº†è¨¼ã«è¨˜è¼‰ã™ã‚‹ãŠåå‰ã‚’ã”å…¥åŠ›ãã ã•ã„</p>
              <input type="text" id="student-name" placeholder="ãŠåå‰" style="padding: 1rem; font-size: 1.2rem; border: 2px solid #e2e8f0; border-radius: 0.5rem; margin-right: 1rem; width: 200px;">
              <button onclick="startQuizQuestions()" style="background: #22c55e; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer;">é–‹å§‹</button>
            </div>
            
            <!-- å•é¡Œè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div id="question-section" style="display: none;">
              <div style="background: white; border-radius: 1rem; padding: 2rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                  <h3 id="question-counter" style="color: #3b82f6;">å•é¡Œ 1 / 20</h3>
                  <div style="background: #f1f5f9; padding: 0.5rem 1rem; border-radius: 0.5rem;">
                    <span style="color: #22c55e; font-weight: bold;">æ­£è§£: <span id="correct-score">0</span></span>
                    <span style="color: #ef4444; font-weight: bold; margin-left: 1rem;">ä¸æ­£è§£: <span id="incorrect-score">0</span></span>
                  </div>
                </div>
                
                <div id="question-content">
                  <h4 id="question-title" style="margin-bottom: 1rem; color: #111827;"></h4>
                  <p id="question-description" style="font-size: 1.1rem; margin-bottom: 2rem; color: #374151;"></p>
                  
                  <div id="options-container" style="margin-bottom: 2rem;"></div>
                  
                  <div style="text-align: center;">
                    <button id="submit-answer" onclick="submitAnswer()" disabled style="background: #3b82f6; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer;" disabled>å›ç­”ã™ã‚‹</button>
                  </div>
                </div>
                
                <div id="feedback-section" style="display: none; margin-top: 2rem;">
                  <div id="feedback-content"></div>
                  <div style="text-align: center; margin-top: 2rem;">
                    <button id="next-question" onclick="nextQuestion()" style="background: #22c55e; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer;">æ¬¡ã®å•é¡Œ</button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- çµæœè¡¨ç¤º -->
            <div id="results-section" style="display: none; text-align: center; padding: 2rem;">
              <h3 style="margin-bottom: 2rem; color: #111827;">å•é¡Œæ¼”ç¿’å®Œäº†ï¼</h3>
              <div id="final-score" style="font-size: 2rem; font-weight: bold; margin-bottom: 2rem;"></div>
              <div id="completion-message" style="margin-bottom: 2rem;"></div>
              <button onclick="resetQuiz()" style="background: #3b82f6; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer;">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
            </div>
          </div>
        </div>
      </div>
    `
  },
  {
    id: 8,
    title: "ã¾ã¨ã‚ã¨å¿œç”¨",
    content: `
      <div>
        <h1>2é€²æ•°ã®å¿œç”¨</h1>
        <div style="background: #f0fdf4; padding: 2rem; border-radius: 1rem; margin: 2rem 0; border: 1px solid #22c55e;">
          <h2 style="color: #22c55e;">ğŸ‰ ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼</h2>
          <p>ã“ã®ç« ã§å­¦ã‚“ã ã“ã¨ã‚’å¾©ç¿’ã—ã¾ã—ã‚‡ã†ï¼š</p>
          <ul style="margin-top: 1rem;">
            <li>âœ… ã‚¢ãƒŠãƒ­ã‚°ã¨ãƒ‡ã‚¸ã‚¿ãƒ«ã®é•ã„</li>
            <li>âœ… ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãŒ2é€²æ•°ã‚’ä½¿ã†ç†ç”±</li>
            <li>âœ… 2é€²æ•°ã®ä½ã®æ¦‚å¿µï¼ˆ8,4,2,1ï¼‰</li>
            <li>âœ… 2é€²æ•°ã¨10é€²æ•°ã®ç›¸äº’å¤‰æ›</li>
          </ul>
        </div>
        
        <div style="background: #fdf2f8; padding: 2rem; border-radius: 1rem; margin: 2rem 0; border: 1px solid #ec4899;">
          <h3 style="color: #ec4899;">ğŸŒŸ å®Ÿç”Ÿæ´»ã§ã®å¿œç”¨</h3>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
            <div style="background: white; padding: 1.5rem; border-radius: 0.75rem;">
              <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ–¼ï¸</div>
              <h4>ãƒ‡ã‚¸ã‚¿ãƒ«ç”»åƒ</h4>
              <p style="font-size: 0.9rem;">å„ãƒ”ã‚¯ã‚»ãƒ«ã®è‰²æƒ…å ±ã‚’æ•°å€¤ã§è¡¨ç¾</p>
            </div>
            <div style="background: white; padding: 1.5rem; border-radius: 0.75rem;">
              <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸµ</div>
              <h4>ãƒ‡ã‚¸ã‚¿ãƒ«éŸ³æ¥½</h4>
              <p style="font-size: 0.9rem;">éŸ³ã®æ³¢å½¢ã‚’æ•°å€¤ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›</p>
            </div>
            <div style="background: white; padding: 1.5rem; border-radius: 0.75rem;">
              <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ”</div>
              <h4>æš—å·åŒ–</h4>
              <p style="font-size: 0.9rem;">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«ã‚‚2é€²æ•°ãŒæ´»ç”¨</p>
            </div>
            <div style="background: white; padding: 1.5rem; border-radius: 0.75rem;">
              <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ¤–</div>
              <h4>äººå·¥çŸ¥èƒ½</h4>
              <p style="font-size: 0.9rem;">AIã®åˆ¤æ–­ã‚‚æœ€çµ‚çš„ã«ã¯0ã¨1</p>
            </div>
          </div>
        </div>
        
        <div style="background: #fef3c7; padding: 2rem; border-radius: 1rem; margin: 2rem 0; border: 1px solid #f59e0b;">
          <h3 style="color: #f59e0b;">ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>
          <p>2é€²æ•°ã‚’ãƒã‚¹ã‚¿ãƒ¼ã—ãŸã‚ãªãŸã¯ã€ã•ã‚‰ã«æ·±ã„ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹ã®ä¸–ç•Œã¸é€²ã‚€æº–å‚™ãŒã§ãã¾ã—ãŸï¼š</p>
          <ul style="margin-top: 1rem;">
            <li>16é€²æ•°ï¼ˆãƒ˜ã‚­ã‚µãƒ‡ã‚·ãƒãƒ«ï¼‰</li>
            <li>è«–ç†å›è·¯ã¨ãƒ–ãƒ¼ãƒ«ä»£æ•°</li>
            <li>ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </li>
            <li>ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®å­¦ç¿’</li>
          </ul>
        </div>
        
        <div style="text-align: center; background: #f1f5f9; padding: 2rem; border-radius: 0.75rem; margin-top: 2rem;">
          <h2>ğŸ¯ ãƒ¬ãƒƒã‚¹ãƒ³å®Œäº†ï¼</h2>
          <p style="font-size: 1.1rem; margin: 1rem 0;">ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®åŸºæœ¬è¨€èªã§ã‚ã‚‹2é€²æ•°ã‚’ç†è§£ã§ãã¾ã—ãŸã€‚</p>
          <div style="margin-top: 1.5rem; color: #6b7280;">
            <p>âœ… å­¦ç¿’æ™‚é–“: ç´„15åˆ†</p>
            <p>ğŸ‰ 2é€²æ•°ãƒã‚¹ã‚¿ãƒ¼èªå®šï¼</p>
          </div>
        </div>
      </div>
    `
  }
];
---

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <meta name="description" content={description}>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Inter', 'Noto Sans JP', sans-serif;
        height: 100vh;
        display: flex;
        flex-direction: column;
        background: #f8fafc;
      }

      @media (max-width: 768px) {
        body {
          height: auto;
          min-height: 100vh;
          overflow: visible;
        }
      }

      /* ã‚¹ãƒ©ã‚¤ãƒ‰å†…å®¹ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯¾å¿œ */
      .slide-inner {
        overflow-y: visible;
        max-height: none;
      }

      /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
      .slide-header {
        background: white;
        border-bottom: 1px solid #e2e8f0;
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
        z-index: 10;
      }

      .header-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
        height: 4rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .header-left {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .nav-btn {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        border: 1px solid #e2e8f0;
        border-radius: 0.5rem;
        background: white;
        color: #64748b;
        text-decoration: none;
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.2s ease;
        cursor: pointer;
      }

      .nav-btn:hover:not(:disabled) {
        background: #f1f5f9;
        border-color: #cbd5e1;
      }

      .nav-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .nav-btn.primary {
        background: #3b82f6;
        color: white;
        border-color: #3b82f6;
      }

      .nav-btn.primary:hover:not(:disabled) {
        background: #1d4ed8;
        border-color: #1d4ed8;
      }

      .lesson-info {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #374151;
        font-weight: 500;
      }

      .slide-counter {
        background: #f1f5f9;
        padding: 0.5rem 1rem;
        border-radius: 2rem;
        font-size: 0.875rem;
        font-weight: 600;
        color: #475569;
      }

      .header-right {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .progress-container {
        height: 4px;
        background: #e2e8f0;
        position: relative;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #3b82f6, #06b6d4);
        transition: width 0.3s ease;
      }

      /* ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ */
      .slide-main {
        flex: 1;
        display: flex;
        align-items: flex-start;
        justify-content: center;
        padding: 2rem;
        overflow-y: auto;
        min-height: 0;
      }

      .slide-container {
        width: 100%;
        max-width: 1000px;
        height: auto;
        min-height: 100%;
      }

      .slide-content {
        display: none;
        width: 100%;
        height: auto;
      }

      .slide-content.active {
        display: block;
      }

      .slide-inner {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 10px 25px -3px rgba(0, 0, 0, 0.1);
        border: 1px solid #e2e8f0;
        padding: 3rem;
        width: 100%;
        height: auto;
        min-height: auto;
      }

      /* ãƒ•ãƒƒã‚¿ãƒ¼ */
      .slide-footer {
        background: white;
        border-top: 1px solid #e2e8f0;
        padding: 1rem;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
      }

      .slide-thumbnails {
        display: flex;
        gap: 0.5rem;
        overflow-x: auto;
        padding: 0.5rem 0;
      }

      .thumbnail {
        min-width: 120px;
        padding: 0.75rem;
        border: 1px solid #e2e8f0;
        border-radius: 0.5rem;
        background: white;
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: left;
      }

      .thumbnail:hover {
        border-color: #3b82f6;
        background: #f0f9ff;
      }

      .thumbnail.active {
        border-color: #3b82f6;
        background: #3b82f6;
        color: white;
      }

      .thumbnail-number {
        font-size: 0.75rem;
        font-weight: 600;
        opacity: 0.8;
      }

      .thumbnail-title {
        font-size: 0.75rem;
        margin-top: 0.25rem;
        line-height: 1.3;
      }

      .keyboard-hints {
        color: #64748b;
        font-size: 0.875rem;
        white-space: nowrap;
      }

      /* ã‚¹ãƒ©ã‚¤ãƒ‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ã‚¹ã‚¿ã‚¤ãƒ« */
      .slide-inner h1 {
        font-size: 2.5rem;
        font-weight: 700;
        color: #111827;
        margin-bottom: 2rem;
        text-align: center;
        border-bottom: 4px solid #3b82f6;
        padding-bottom: 1rem;
      }

      .slide-inner h2 {
        font-size: 1.75rem;
        font-weight: 600;
        color: #1f2937;
        margin-top: 2rem;
        margin-bottom: 1rem;
      }

      .slide-inner h3 {
        font-size: 1.25rem;
        font-weight: 600;
        color: #374151;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
      }

      .slide-inner p {
        color: #374151;
        line-height: 1.7;
        margin-bottom: 1rem;
        font-size: 1.1rem;
      }

      .slide-inner strong {
        color: #111827;
        font-weight: 600;
      }

      .slide-inner code {
        background: #f1f5f9;
        color: #e11d48;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-size: 0.9em;
      }

      .slide-inner pre {
        background: #1e293b;
        color: #f1f5f9;
        padding: 1rem;
        border-radius: 0.5rem;
        margin: 1rem 0;
        overflow-x: auto;
      }

      /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
      @media (max-width: 768px) {
        .header-content {
          padding: 0 0.5rem;
        }

        .lesson-info span {
          display: none;
        }

        .slide-main {
          padding: 1rem;
        }

        .slide-inner {
          padding: 2rem 1.5rem;
          min-height: 400px;
        }

        .slide-thumbnails {
          display: none;
        }

        .keyboard-hints {
          font-size: 0.75rem;
        }

        .slide-inner h1 {
          font-size: 2rem;
        }
      }
    </style>
</head>

<body>
  <div class="slide-player">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="slide-header">
      <div class="header-content">
        <div class="header-left">
          <a href="/lessons" class="nav-btn">
            ğŸ  <span>ãƒ¬ãƒƒã‚¹ãƒ³ä¸€è¦§</span>
          </a>
          <div class="lesson-info">
            ğŸ”¢ <span>{title}</span>
          </div>
        </div>
        
        <div class="header-center">
          <span class="slide-counter" id="slide-counter">
            1 / {slides.length}
          </span>
        </div>
        
        <div class="header-right">
          <button onclick="goToSlide(0)" class="nav-btn" id="first-btn">
            â®ï¸
          </button>
          <button onclick="prevSlide()" class="nav-btn" id="prev-btn">
            â—€ï¸
          </button>
          <button onclick="nextSlide()" class="nav-btn primary" id="next-btn">
            æ¬¡ã¸ â–¶ï¸
          </button>
          <button onclick="goToSlide({slides.length - 1})" class="nav-btn" id="last-btn">
            â­ï¸
          </button>
        </div>
      </div>
      
      <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
      <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
    </header>

    <!-- ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¨ãƒªã‚¢ -->
    <main class="slide-main">
      <div class="slide-container">
        {slides.map((slide, index) => (
          <div class={`slide-content ${index === 0 ? 'active' : ''}`} id={`slide-${index}`}>
            <div class="slide-inner">
              <div set:html={slide.content} />
            </div>
          </div>
        ))}
      </div>
    </main>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="slide-footer">
      <div class="footer-content">
        <div class="slide-thumbnails">
          {slides.map((slide, index) => (
            <button
              onclick={`goToSlide(${index})`}
              class={`thumbnail ${index === 0 ? 'active' : ''}`}
              id={`thumb-${index}`}
            >
              <div class="thumbnail-number">{index + 1}</div>
              <div class="thumbnail-title">{slide.title}</div>
            </button>
          ))}
        </div>
        
        <div class="keyboard-hints">
          ğŸŒŸ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰: â† â†’ ã‚¹ãƒšãƒ¼ã‚¹
        </div>
      </div>
    </footer>
  </div>

  <script define:vars={{ slides }}>
    let currentSlide = 0;
    const totalSlides = slides.length;

    // 2é€²æ•°å¤‰æ›ãƒ„ãƒ¼ãƒ«ç”¨ã®å¤‰æ•°
    let bits = [0, 0, 0, 0]; // 4ã¤ã®ãƒ“ãƒƒãƒˆï¼ˆ1,2,4,8ã®ä½ï¼‰

    // ã‚²ãƒ¼ãƒ ç”¨ã®å¤‰æ•°
    let currentQuestion = null;
    let questionType = 'binary-to-decimal'; // 'binary-to-decimal' or 'decimal-to-binary'
    let correctCount = 0;
    let incorrectCount = 0;

    function updateUI() {
      // ã‚¹ãƒ©ã‚¤ãƒ‰ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æ›´æ–°
      document.getElementById('slide-counter').textContent = `${currentSlide + 1} / ${totalSlides}`;
      
      // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°
      const progress = ((currentSlide + 1) / totalSlides) * 100;
      document.getElementById('progress-bar').style.width = `${progress}%`;
      
      // ãƒœã‚¿ãƒ³çŠ¶æ…‹æ›´æ–°
      document.getElementById('first-btn').disabled = currentSlide === 0;
      document.getElementById('prev-btn').disabled = currentSlide === 0;
      document.getElementById('last-btn').disabled = currentSlide === totalSlides - 1;
      
      // æ¬¡ã¸ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°
      const nextBtn = document.getElementById('next-btn');
      nextBtn.textContent = currentSlide === totalSlides - 1 ? 'å®Œäº† âœ…' : 'æ¬¡ã¸ â–¶ï¸';
      
      // ã‚¹ãƒ©ã‚¤ãƒ‰è¡¨ç¤ºæ›´æ–°
      document.querySelectorAll('.slide-content').forEach((slide, index) => {
        if (index === currentSlide) {
          slide.classList.add('active');
        } else {
          slide.classList.remove('active');
        }
      });
      
      // ã‚µãƒ ãƒã‚¤ãƒ«æ›´æ–°
      document.querySelectorAll('.thumbnail').forEach((thumb, index) => {
        thumb.classList.toggle('active', index === currentSlide);
      });
    }

    function nextSlide() {
      if (currentSlide < totalSlides - 1) {
        currentSlide++;
        updateUI();
      } else {
        // å®Œäº†æ™‚ã®å‡¦ç†
        window.location.href = '/lessons';
      }
    }

    function prevSlide() {
      if (currentSlide > 0) {
        currentSlide--;
        updateUI();
      }
    }

    function goToSlide(index) {
      if (index >= 0 && index < totalSlides) {
        currentSlide = index;
        updateUI();
      }
    }

    // 2é€²æ•°å¤‰æ›ãƒ„ãƒ¼ãƒ«ã®é–¢æ•°
    function toggleBit(position) {
      bits[position] = bits[position] === 0 ? 1 : 0;
      updateConverter();
    }

    function updateConverter() {
      const values = [1, 2, 4, 8];
      let total = 0;
      let binaryString = '';
      let calculation = '';

      for (let i = 3; i >= 0; i--) {
        const bit = bits[i];
        const value = values[i];
        
        // ãƒœã‚¿ãƒ³ã®æ›´æ–°
        const button = document.getElementById(`bit-${i}`);
        if (button) {
          button.textContent = bit;
          button.style.background = bit === 1 ? '#22c55e' : '#ef4444';
        }
        
        // è¨ˆç®—ã®æ›´æ–°
        const calc = document.getElementById(`calc-${i}`);
        if (calc) {
          calc.textContent = `${value} Ã— ${bit} = ${value * bit}`;
        }
        
        total += value * bit;
        binaryString = binaryString + bit;
        
        if (i > 0) calculation += `${value * bit} + `;
        else calculation += `${value * bit} = ${total}`;
      }

      // çµæœã®æ›´æ–°
      const binaryResult = document.getElementById('binary-result');
      const decimalResult = document.getElementById('decimal-result');
      const calculationDiv = document.getElementById('calculation');
      
      if (binaryResult) binaryResult.textContent = binaryString;
      if (decimalResult) decimalResult.textContent = total;
      if (calculationDiv) calculationDiv.textContent = calculation;
    }

    // ã‚²ãƒ¼ãƒ æ©Ÿèƒ½
    function generateQuestion() {
      questionType = Math.random() < 0.5 ? 'binary-to-decimal' : 'decimal-to-binary';
      
      if (questionType === 'binary-to-decimal') {
        // 2é€²æ•°ã‹ã‚‰10é€²æ•°ã¸ã®å¤‰æ›å•é¡Œ
        const decimal = Math.floor(Math.random() * 16); // 0-15
        const binary = decimal.toString(2).padStart(4, '0');
        currentQuestion = { binary, decimal };
        
        document.getElementById('question').innerHTML = `2é€²æ•° <strong>${binary}</strong> ã‚’10é€²æ•°ã«å¤‰æ›ã—ã¦ãã ã•ã„`;
      } else {
        // 10é€²æ•°ã‹ã‚‰2é€²æ•°ã¸ã®å¤‰æ›å•é¡Œ
        const decimal = Math.floor(Math.random() * 16); // 0-15
        const binary = decimal.toString(2).padStart(4, '0');
        currentQuestion = { binary, decimal };
        
        document.getElementById('question').innerHTML = `10é€²æ•° <strong>${decimal}</strong> ã‚’2é€²æ•°ï¼ˆ4æ¡ï¼‰ã«å¤‰æ›ã—ã¦ãã ã•ã„`;
      }

      // UIæ›´æ–°
      document.getElementById('start-btn').style.display = 'none';
      document.getElementById('answer-area').style.display = 'block';
      document.getElementById('answer-input').value = '';
      document.getElementById('feedback').innerHTML = '';
      document.getElementById('answer-input').focus();
    }

    function checkAnswer() {
      const input = document.getElementById('answer-input').value.trim();
      const feedback = document.getElementById('feedback');
      
      let isCorrect = false;
      let correctAnswer = '';
      
      if (questionType === 'binary-to-decimal') {
        correctAnswer = currentQuestion.decimal.toString();
        isCorrect = input === correctAnswer;
      } else {
        correctAnswer = currentQuestion.binary;
        isCorrect = input === correctAnswer;
      }
      
      if (isCorrect) {
        correctCount++;
        feedback.innerHTML = `<div style="background: #dcfce7; color: #22c55e; padding: 1rem; border-radius: 0.5rem; font-weight: bold;">ğŸ‰ æ­£è§£ï¼</div>`;
      } else {
        incorrectCount++;
        feedback.innerHTML = `<div style="background: #fee2e2; color: #ef4444; padding: 1rem; border-radius: 0.5rem; font-weight: bold;">âŒ ä¸æ­£è§£ã€‚æ­£è§£ã¯ ${correctAnswer} ã§ã™ã€‚</div>`;
      }
      
      // ã‚¹ã‚³ã‚¢æ›´æ–°
      document.getElementById('correct-count').textContent = correctCount;
      document.getElementById('incorrect-count').textContent = incorrectCount;
      
      // æ¬¡ã®å•é¡Œãƒœã‚¿ãƒ³
      setTimeout(() => {
        feedback.innerHTML += `<button onclick="generateQuestion()" style="background: #3b82f6; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer; margin-top: 1rem;">æ¬¡ã®å•é¡Œ</button>`;
      }, 1500);
    }

    // ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã§å›ç­”
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && document.getElementById('answer-area').style.display !== 'none') {
        checkAnswer();
      } else if (e.key === 'ArrowRight' || e.key === ' ') {
        e.preventDefault();
        nextSlide();
      } else if (e.key === 'ArrowLeft') {
        e.preventDefault();
        prevSlide();
      } else if (e.key === 'Home') {
        e.preventDefault();
        goToSlide(0);
      } else if (e.key === 'End') {
        e.preventDefault();
        goToSlide(totalSlides - 1);
      }
    });

    // åŸ‹ã‚è¾¼ã¿å•é¡Œæ¼”ç¿’ã®å¤‰æ•°
    let quizData = null;
    let currentQuestionIndex = 0;
    let selectedAnswer = null;
    let correctAnswers = 0;
    let incorrectAnswers = 0;
    let studentName = '';

    // å•é¡Œæ¼”ç¿’ã‚’é–‹å§‹
    async function startEmbeddedQuiz() {
      document.getElementById('quiz-intro').style.display = 'none';
      document.getElementById('quiz-app').style.display = 'block';
      
      // ãƒ‡ãƒ¼ã‚¿ãŒæ—¢ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
      if (!quizData || !quizData.questions || quizData.questions.length === 0) {
        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
        document.getElementById('name-input-section').innerHTML = `
          <div style="text-align: center; padding: 2rem;">
            <div style="font-size: 1.5rem; margin-bottom: 1rem;">ğŸ“š</div>
            <p>å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...</p>
          </div>
        `;
        
        await loadQuizData();
      }
      
      // åå‰ãŒä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
      const savedName = localStorage.getItem('binaryQuizStudentName');
      if (savedName && savedName.trim()) {
        studentName = savedName;
        console.log('Using saved name for new quiz:', studentName);
        
        // åå‰ç¢ºèªç”»é¢ã‚’è¡¨ç¤º
        document.getElementById('name-input-section').innerHTML = `
          <div style="text-align: center; padding: 2rem;">
            <h3 style="margin-bottom: 1rem;">ğŸ¯ å•é¡Œæ¼”ç¿’é–‹å§‹ï¼</h3>
            <p style="color: #6b7280; margin-bottom: 1rem;">${studentName}ã•ã‚“ã€å•é¡Œæ¼”ç¿’ã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ</p>
            <div style="margin-bottom: 2rem;">
              <button onclick="startQuizQuestions()" style="background: #22c55e; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer; margin-right: 1rem;">ã¯ã„ã€é–‹å§‹ï¼</button>
              <button onclick="resetStudentName()" style="background: #6b7280; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer;">åˆ¥ã®åå‰ã§é–‹å§‹</button>
            </div>
          </div>
        `;
      } else {
        // åˆå›ã®åå‰å…¥åŠ›ç”»é¢ã‚’è¡¨ç¤º
        document.getElementById('name-input-section').innerHTML = `
          <h3 style="margin-bottom: 1rem;">ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</h3>
          <p style="color: #6b7280; margin-bottom: 2rem;">ä¿®äº†è¨¼ã«è¨˜è¼‰ã™ã‚‹ãŠåå‰ã‚’ã”å…¥åŠ›ãã ã•ã„</p>
          <input type="text" id="student-name" placeholder="ãŠåå‰" style="padding: 1rem; font-size: 1.2rem; border: 2px solid #e2e8f0; border-radius: 0.5rem; margin-right: 1rem; width: 200px;">
          <button onclick="startQuizQuestions()" style="background: #22c55e; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer;">é–‹å§‹</button>
        `;
      }
    }

    // å•é¡Œãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
    async function loadQuizData() {
      try {
        const response = await fetch('/questions/binary_conversion/questions.yaml');
        const yamlText = await response.text();
        quizData = parseQuizYAML(yamlText);
        console.log('Quiz data loaded:', quizData);
      } catch (error) {
        console.error('Failed to load quiz data:', error);
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å•é¡Œãƒ‡ãƒ¼ã‚¿
        quizData = {
          title: '2é€²æ•°å¤‰æ›',
          questions: [
            {
              id: 'q1',
              title: '2é€²æ•°ã‹ã‚‰10é€²æ•°ã¸ã®å¤‰æ›',
              description: '2é€²æ•°ã€Œ1010ã€ã‚’10é€²æ•°ã«å¤‰æ›ã—ã¦ãã ã•ã„ã€‚',
              options: [
                { id: 'a', text: '8', isCorrect: false, explanation: '2é€²æ•°1010ã¯ã€1Ã—2Â³ + 0Ã—2Â² + 1Ã—2Â¹ + 0Ã—2â° = 8 + 0 + 2 + 0 = 10ã§ã™ã€‚' },
                { id: 'b', text: '10', isCorrect: true, explanation: 'æ­£è§£ã§ã™ï¼2é€²æ•°1010ã¯ã€1Ã—2Â³ + 0Ã—2Â² + 1Ã—2Â¹ + 0Ã—2â° = 8 + 0 + 2 + 0 = 10ã§ã™ã€‚' },
                { id: 'c', text: '12', isCorrect: false, explanation: '2é€²æ•°1010ã¯ã€1Ã—2Â³ + 0Ã—2Â² + 1Ã—2Â¹ + 0Ã—2â° = 8 + 0 + 2 + 0 = 10ã§ã™ã€‚' },
                { id: 'd', text: '14', isCorrect: false, explanation: '2é€²æ•°1010ã¯ã€1Ã—2Â³ + 0Ã—2Â² + 1Ã—2Â¹ + 0Ã—2â° = 8 + 0 + 2 + 0 = 10ã§ã™ã€‚' }
              ]
            },
            {
              id: 'q2',
              title: '10é€²æ•°ã‹ã‚‰2é€²æ•°ã¸ã®å¤‰æ›',
              description: '10é€²æ•°ã€Œ13ã€ã‚’2é€²æ•°ã«å¤‰æ›ã—ã¦ãã ã•ã„ã€‚',
              options: [
                { id: 'a', text: '1011', isCorrect: false, explanation: '10é€²æ•°13ã‚’2é€²æ•°ã«å¤‰æ›ã™ã‚‹ã¨1101ã§ã™ã€‚' },
                { id: 'b', text: '1101', isCorrect: true, explanation: 'æ­£è§£ã§ã™ï¼10é€²æ•°13ã‚’2é€²æ•°ã«å¤‰æ›ã™ã‚‹ã¨1101ã§ã™ã€‚' },
                { id: 'c', text: '1110', isCorrect: false, explanation: '10é€²æ•°13ã‚’2é€²æ•°ã«å¤‰æ›ã™ã‚‹ã¨1101ã§ã™ã€‚' },
                { id: 'd', text: '1111', isCorrect: false, explanation: '10é€²æ•°13ã‚’2é€²æ•°ã«å¤‰æ›ã™ã‚‹ã¨1101ã§ã™ã€‚' }
              ]
            },
            {
              id: 'q3',
              title: '2é€²æ•°ã®ç†è§£',
              description: '2é€²æ•°ã€Œ101ã€ã‚’10é€²æ•°ã«å¤‰æ›ã—ã¦ãã ã•ã„ã€‚',
              options: [
                { id: 'a', text: '4', isCorrect: false, explanation: '2é€²æ•°101ã¯ã€1Ã—2Â² + 0Ã—2Â¹ + 1Ã—2â° = 4 + 0 + 1 = 5ã§ã™ã€‚' },
                { id: 'b', text: '5', isCorrect: true, explanation: 'æ­£è§£ã§ã™ï¼2é€²æ•°101ã¯ã€1Ã—2Â² + 0Ã—2Â¹ + 1Ã—2â° = 4 + 0 + 1 = 5ã§ã™ã€‚' },
                { id: 'c', text: '6', isCorrect: false, explanation: '2é€²æ•°101ã¯ã€1Ã—2Â² + 0Ã—2Â¹ + 1Ã—2â° = 4 + 0 + 1 = 5ã§ã™ã€‚' },
                { id: 'd', text: '7', isCorrect: false, explanation: '2é€²æ•°101ã¯ã€1Ã—2Â² + 0Ã—2Â¹ + 1Ã—2â° = 4 + 0 + 1 = 5ã§ã™ã€‚' }
              ]
            }
          ]
        };
        console.log('Using fallback data with', quizData.questions.length, 'questions');
      }
    }

    // ç°¡æ˜“YAMLè§£æï¼ˆå•é¡Œãƒ‡ãƒ¼ã‚¿ç”¨ï¼‰
    function parseQuizYAML(yamlText) {
      console.log('Parsing YAML:', yamlText.substring(0, 500));
      const lines = yamlText.split('\n');
      const data = { questions: [] };
      let currentQuestion = null;
      let currentOption = null;
      let inQuestions = false;
      let inOptions = false;
      
      for (let i = 0; i < lines.length; i++) {
        const line = lines[i];
        const trimmed = line.trim();
        const indent = line.length - line.trimStart().length;
        
        if (!trimmed || trimmed.startsWith('#')) continue;
        
        // questionsã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®é–‹å§‹
        if (trimmed === 'questions:') {
          inQuestions = true;
          continue;
        }
        
        // questionsã‚»ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ã®å‡¦ç†
        if (inQuestions) {
          // æ–°ã—ã„å•é¡Œã®é–‹å§‹ï¼ˆã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ2ï¼‰
          if (indent === 2 && trimmed.startsWith('- id:')) {
            // å‰ã®å•é¡Œã‚’ä¿å­˜
            if (currentQuestion) {
              if (currentOption) {
                currentQuestion.options.push(currentOption);
                currentOption = null;
              }
              data.questions.push(currentQuestion);
            }
            // æ–°ã—ã„å•é¡Œã‚’é–‹å§‹
            currentQuestion = { 
              id: trimmed.substring(5).trim().replace(/['"]/g, ''), 
              options: [],
              title: '',
              description: ''
            };
            inOptions = false;
          }
          // å•é¡Œã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ4ï¼‰
          else if (indent === 4 && currentQuestion && trimmed.includes(':')) {
            const [key, ...valueParts] = trimmed.split(':');
            const value = valueParts.join(':').trim().replace(/['"]/g, '');
            
            if (key === 'title') {
              currentQuestion.title = value;
            } else if (key === 'description') {
              currentQuestion.description = value;
            } else if (key === 'options') {
              inOptions = true;
            }
          }
          // é¸æŠè‚¢ã®é–‹å§‹ï¼ˆã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ6ï¼‰
          else if (indent === 6 && inOptions && trimmed.startsWith('- id:')) {
            if (currentOption) {
              currentQuestion.options.push(currentOption);
            }
            currentOption = { 
              id: trimmed.substring(5).trim().replace(/['"]/g, ''),
              text: '',
              isCorrect: false,
              explanation: ''
            };
          }
          // é¸æŠè‚¢ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ8ï¼‰
          else if (indent === 8 && currentOption && trimmed.includes(':')) {
            const [key, ...valueParts] = trimmed.split(':');
            const value = valueParts.join(':').trim().replace(/['"]/g, '');
            
            if (key === 'text') {
              currentOption.text = value;
            } else if (key === 'isCorrect') {
              currentOption.isCorrect = value === 'true';
            } else if (key === 'explanation') {
              currentOption.explanation = value;
            }
          }
        }
      }
      
      // æœ€å¾Œã®å•é¡Œã¨é¸æŠè‚¢ã‚’ä¿å­˜
      if (currentOption && currentQuestion) {
        currentQuestion.options.push(currentOption);
      }
      if (currentQuestion) {
        data.questions.push(currentQuestion);
      }
      
      console.log('Parsed questions:', data.questions.length);
      return data;
    }

    // å•é¡Œæ¼”ç¿’ã‚’é–‹å§‹ï¼ˆåå‰å…¥åŠ›å¾Œï¼‰
    function startQuizQuestions() {
      // åå‰ãŒæ—¢ã«ä¿å­˜ã•ã‚Œã¦ã„ãªã„å ´åˆã®ã¿å…¥åŠ›ã‹ã‚‰å–å¾—
      if (!studentName || !studentName.trim()) {
        const nameInput = document.getElementById('student-name');
        if (!nameInput) {
          console.error('Name input not found');
          return;
        }
        
        studentName = nameInput.value.trim();
        if (!studentName) {
          alert('ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
          return;
        }
        
        // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«åå‰ã‚’ä¿å­˜
        localStorage.setItem('binaryQuizStudentName', studentName);
        console.log('Name saved to localStorage:', studentName);
      }
      
      // ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
      if (!quizData || !quizData.questions || quizData.questions.length === 0) {
        console.error('Quiz data not loaded');
        alert('å•é¡Œãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚');
        return;
      }
      
      console.log('Starting quiz with', quizData.questions.length, 'questions');
      
      document.getElementById('name-input-section').style.display = 'none';
      document.getElementById('question-section').style.display = 'block';
      
      currentQuestionIndex = 0;
      correctAnswers = 0;
      incorrectAnswers = 0;
      selectedAnswer = null;
      
      // ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚’åˆæœŸåŒ–
      document.getElementById('correct-score').textContent = '0';
      document.getElementById('incorrect-score').textContent = '0';
      
      showQuestion();
    }

    // å•é¡Œã‚’è¡¨ç¤º
    function showQuestion() {
      console.log('showQuestion called:', { quizData, currentQuestionIndex, questionsLength: quizData?.questions?.length });
      
      if (!quizData || !quizData.questions || currentQuestionIndex >= quizData.questions.length) {
        console.log('No more questions, showing results');
        showResults();
        return;
      }
      
      const question = quizData.questions[currentQuestionIndex];
      document.getElementById('question-counter').textContent = `å•é¡Œ ${currentQuestionIndex + 1} / ${quizData.questions.length}`;
      document.getElementById('question-title').textContent = question.title || '';
      document.getElementById('question-description').textContent = question.description || '';
      
      // é¸æŠè‚¢ã‚’è¡¨ç¤º
      const optionsContainer = document.getElementById('options-container');
      optionsContainer.innerHTML = '';
      
      question.options.forEach(option => {
        const optionElement = document.createElement('label');
        optionElement.style.cssText = 'display: block; padding: 1rem; border: 2px solid #e2e8f0; border-radius: 0.5rem; margin-bottom: 1rem; cursor: pointer; transition: all 0.2s ease;';
        optionElement.innerHTML = `
          <input type="radio" name="quiz-option" value="${option.id}" style="margin-right: 0.5rem;">
          <span>${option.text}</span>
        `;
        optionElement.addEventListener('click', function() {
          selectedAnswer = option.id;
          document.getElementById('submit-answer').disabled = false;
          // ä»–ã®é¸æŠè‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆ
          optionsContainer.querySelectorAll('label').forEach(label => {
            label.style.borderColor = '#e2e8f0';
            label.style.backgroundColor = 'white';
          });
          // é¸æŠã—ãŸé¸æŠè‚¢ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
          this.style.borderColor = '#3b82f6';
          this.style.backgroundColor = '#f0f9ff';
        });
        
        optionsContainer.appendChild(optionElement);
      });
      
      // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éš ã™
      document.getElementById('feedback-section').style.display = 'none';
      document.getElementById('question-content').style.display = 'block';
      selectedAnswer = null;
      document.getElementById('submit-answer').disabled = true;
    }

    // å›ç­”ã‚’æå‡º
    function submitAnswer() {
      if (!selectedAnswer) return;
      
      const question = quizData.questions[currentQuestionIndex];
      const selectedOption = question.options.find(opt => opt.id === selectedAnswer);
      const isCorrect = selectedOption.isCorrect;
      
      if (isCorrect) {
        correctAnswers++;
      } else {
        incorrectAnswers++;
      }
      
      // ã‚¹ã‚³ã‚¢æ›´æ–°
      document.getElementById('correct-score').textContent = correctAnswers;
      document.getElementById('incorrect-score').textContent = incorrectAnswers;
      
      // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡¨ç¤º
      const feedbackContent = document.getElementById('feedback-content');
      const feedbackHtml = `
        <div style="padding: 1.5rem; border-radius: 0.75rem; ${isCorrect ? 'background: #dcfce7; border: 1px solid #22c55e;' : 'background: #fee2e2; border: 1px solid #ef4444;'}">
          <h4 style="color: ${isCorrect ? '#22c55e' : '#ef4444'}; margin-bottom: 1rem;">
            ${isCorrect ? 'ğŸ‰ æ­£è§£ï¼' : 'âŒ ä¸æ­£è§£'}
          </h4>
          <p style="margin-bottom: 1rem;">${selectedOption.explanation}</p>
          ${question.options.map(opt => `
            <div style="margin-bottom: 0.5rem; padding: 0.5rem; border-radius: 0.25rem; ${opt.isCorrect ? 'background: rgba(34, 197, 94, 0.1); color: #22c55e;' : opt.id === selectedAnswer && !opt.isCorrect ? 'background: rgba(239, 68, 68, 0.1); color: #ef4444;' : 'color: #6b7280;'}">
              ${opt.isCorrect ? 'âœ“' : opt.id === selectedAnswer ? 'âœ—' : 'â—‹'} ${opt.text}
            </div>
          `).join('')}
        </div>
      `;
      
      feedbackContent.innerHTML = feedbackHtml;
      document.getElementById('question-content').style.display = 'none';
      document.getElementById('feedback-section').style.display = 'block';
      
      // æ¬¡ã®å•é¡Œãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆæ›´æ–°
      const nextButton = document.getElementById('next-question');
      nextButton.textContent = currentQuestionIndex >= quizData.questions.length - 1 ? 'çµæœã‚’è¦‹ã‚‹' : 'æ¬¡ã®å•é¡Œ';
    }

    // æ¬¡ã®å•é¡Œã¸
    function nextQuestion() {
      currentQuestionIndex++;
      showQuestion();
    }

    // çµæœè¡¨ç¤º
    function showResults() {
      console.log('showResults called, studentName:', studentName);
      
      document.getElementById('question-section').style.display = 'none';
      document.getElementById('results-section').style.display = 'block';
      
      const totalQuestions = quizData.questions.length;
      const percentage = Math.round((correctAnswers / totalQuestions) * 100);
      
      document.getElementById('final-score').innerHTML = `
        <div style="color: #3b82f6;">${correctAnswers} / ${totalQuestions} å•æ­£è§£</div>
        <div style="color: #6b7280; font-size: 1.2rem; margin-top: 0.5rem;">${percentage}%</div>
      `;
      
      let message = '';
      if (percentage === 100) {
        message = `<div style="background: #dcfce7; padding: 2rem; border-radius: 1rem; border: 1px solid #22c55e;">
          <h4 style="color: #22c55e; margin-bottom: 1rem;">ğŸ† ãƒ‘ãƒ¼ãƒ•ã‚§ã‚¯ãƒˆï¼</h4>
          <p>${studentName}ã•ã‚“ã€å…¨å•æ­£è§£ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼<br>2é€²æ•°å¤‰æ›ã‚’å®Œå…¨ã«ãƒã‚¹ã‚¿ãƒ¼ã—ã¾ã—ãŸï¼</p>
        </div>`;
      } else if (percentage >= 80) {
        message = `<div style="background: #fef3c7; padding: 2rem; border-radius: 1rem; border: 1px solid #f59e0b;">
          <h4 style="color: #f59e0b; margin-bottom: 1rem;">ğŸ‰ å„ªç§€ï¼</h4>
          <p>${studentName}ã•ã‚“ã€ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ï¼<br>2é€²æ•°å¤‰æ›ã‚’ã‚ˆãç†è§£ã•ã‚Œã¦ã„ã¾ã™ï¼</p>
        </div>`;
      } else {
        message = `<div style="background: #f0f9ff; padding: 2rem; border-radius: 1rem; border: 1px solid #3b82f6;">
          <h4 style="color: #3b82f6; margin-bottom: 1rem;">ğŸ“š ã‚‚ã†å°‘ã—ï¼</h4>
          <p>${studentName}ã•ã‚“ã€åŸºæœ¬ã¯ç†è§£ã§ãã¦ã„ã¾ã™ï¼<br>ãƒ¬ãƒƒã‚¹ãƒ³ã‚’å¾©ç¿’ã—ã¦ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</p>
        </div>`;
      }
      
      document.getElementById('completion-message').innerHTML = message;
      
      // åå‰ãŒãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
      console.log('localStorage studentName:', localStorage.getItem('binaryQuizStudentName'));
    }

    // ã‚¯ã‚¤ã‚ºã‚’ãƒªã‚»ãƒƒãƒˆ
    function resetQuiz() {
      // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰åå‰ã‚’å¾©å…ƒ
      if (!studentName || !studentName.trim()) {
        studentName = localStorage.getItem('binaryQuizStudentName') || '';
      }
      
      console.log('resetQuiz called, studentName:', studentName);
      
      // å…¨ã¦ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤ºã«ã™ã‚‹
      document.getElementById('results-section').style.display = 'none';
      document.getElementById('question-section').style.display = 'none';
      document.getElementById('quiz-app').style.display = 'none';
      
      // ã‚¤ãƒ³ãƒˆãƒ­ç”»é¢ã‚’è¡¨ç¤º
      document.getElementById('quiz-intro').style.display = 'block';
      
      // åå‰ãŒæ—¢ã«å…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
      if (studentName && studentName.trim()) {
        console.log('Name exists, showing retry screen for:', studentName);
        // åå‰ç¢ºèªç”»é¢ã‚’è¡¨ç¤º
        document.getElementById('name-input-section').style.display = 'block';
        document.getElementById('name-input-section').innerHTML = `
          <div style="text-align: center; padding: 2rem;">
            <h3 style="margin-bottom: 1rem;">ğŸ¯ ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ï¼</h3>
            <p style="color: #6b7280; margin-bottom: 1rem;">${studentName}ã•ã‚“ã€å†æŒ‘æˆ¦ã—ã¾ã™ã‹ï¼Ÿ</p>
            <div style="margin-bottom: 2rem;">
              <button onclick="restartQuizDirectly()" style="background: #22c55e; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer; margin-right: 1rem;">ã¯ã„ã€å†æŒ‘æˆ¦ï¼</button>
              <button onclick="resetStudentName()" style="background: #6b7280; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer;">åˆ¥ã®åå‰ã§æŒ‘æˆ¦</button>
            </div>
          </div>
        `;
      } else {
        console.log('No name found, showing name input screen');
        // åˆå›ã®åå‰å…¥åŠ›ç”»é¢ã‚’è¡¨ç¤º
        document.getElementById('name-input-section').style.display = 'block';
        document.getElementById('name-input-section').innerHTML = `
          <h3 style="margin-bottom: 1rem;">ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</h3>
          <p style="color: #6b7280; margin-bottom: 2rem;">ä¿®äº†è¨¼ã«è¨˜è¼‰ã™ã‚‹ãŠåå‰ã‚’ã”å…¥åŠ›ãã ã•ã„</p>
          <input type="text" id="student-name" placeholder="ãŠåå‰" style="padding: 1rem; font-size: 1.2rem; border: 2px solid #e2e8f0; border-radius: 0.5rem; margin-right: 1rem; width: 200px;">
          <button onclick="startQuizQuestions()" style="background: #22c55e; color: white; border: none; padding: 1rem 2rem; border-radius: 0.5rem; font-size: 1.1rem; cursor: pointer;">é–‹å§‹</button>
        `;
      }
      
      // å¤‰æ•°ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆåå‰ä»¥å¤–ï¼‰
      currentQuestionIndex = 0;
      correctAnswers = 0;
      incorrectAnswers = 0;
      selectedAnswer = null;
      
      // ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ
      const correctScore = document.getElementById('correct-score');
      const incorrectScore = document.getElementById('incorrect-score');
      if (correctScore) correctScore.textContent = '0';
      if (incorrectScore) incorrectScore.textContent = '0';
    }
    
    // åå‰ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦æ–°ã—ã„åå‰ã§æŒ‘æˆ¦
    function resetStudentName() {
      studentName = '';
      localStorage.removeItem('binaryQuizStudentName');
      console.log('Student name reset');
      resetQuiz();
    }
    
    // ç›´æ¥å•é¡Œæ¼”ç¿’ã‚’å†é–‹å§‹ï¼ˆåå‰ä¿æŒï¼‰
    function restartQuizDirectly() {
      console.log('Restarting quiz directly with name:', studentName);
      
      // ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
      if (!quizData || !quizData.questions || quizData.questions.length === 0) {
        console.error('Quiz data not loaded');
        alert('å•é¡Œãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚');
        return;
      }
      
      document.getElementById('name-input-section').style.display = 'none';
      document.getElementById('question-section').style.display = 'block';
      
      currentQuestionIndex = 0;
      correctAnswers = 0;
      incorrectAnswers = 0;
      selectedAnswer = null;
      
      // ã‚¹ã‚³ã‚¢è¡¨ç¤ºã‚’åˆæœŸåŒ–
      document.getElementById('correct-score').textContent = '0';
      document.getElementById('incorrect-score').textContent = '0';
      
      showQuestion();
    }

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ã¨ã—ã¦å…¬é–‹
    window.nextSlide = nextSlide;
    window.prevSlide = prevSlide;
    window.goToSlide = goToSlide;
    window.toggleBit = toggleBit;
    window.startEmbeddedQuiz = startEmbeddedQuiz;
    window.startQuizQuestions = startQuizQuestions;
    window.submitAnswer = submitAnswer;
    window.nextQuestion = nextQuestion;
    window.resetQuiz = resetQuiz;
    window.resetStudentName = resetStudentName;
    window.restartQuizDirectly = restartQuizDirectly;

    // åˆæœŸåŒ–
    updateConverter();
    
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰åå‰ã‚’å¾©å…ƒ
    const savedName = localStorage.getItem('binaryQuizStudentName');
    if (savedName) {
      studentName = savedName;
      console.log('Restored name from localStorage:', studentName);
    }
  </script>
</body>
</html>