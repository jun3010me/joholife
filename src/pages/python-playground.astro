---
// python-playground.astro
import Layout from '../layouts/Layout.astro';
---

<Layout title="Python ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰">
    <div class="python-playground">
        <div class="playground-header">
            <h1>ğŸ Python ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰</h1>
            <p>ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§Pythonã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†ï¼</p>
        </div>

        <div class="playground-content">
            <div class="code-section">
                <div class="section-header">
                    <h3>ğŸ“ ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿</h3>
                    <div class="controls">
                        <button id="run-btn" class="btn btn-primary" disabled>
                            â–¶ï¸ å®Ÿè¡Œ
                        </button>
                        <button id="clear-btn" class="btn btn-secondary">
                            ğŸ—‘ï¸ ã‚¯ãƒªã‚¢
                        </button>
                        <button id="example-btn" class="btn btn-secondary">
                            ğŸ“š ã‚µãƒ³ãƒ—ãƒ«
                        </button>
                    </div>
                </div>
                <div id="code-editor-container">
                    <div id="code-editor"></div>
                </div>
            </div>

            <div class="output-section">
                <div class="section-header">
                    <h3>ğŸ“¤ å®Ÿè¡Œçµæœ</h3>
                    <div class="status">
                        <span id="python-status">Pythonã‚¨ãƒ³ã‚¸ãƒ³ã‚’èª­ã¿è¾¼ã¿ä¸­...</span>
                    </div>
                </div>
                <div id="output-area">
                    <div class="loading">
                        ğŸ”„ Pyodideã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„
                    </div>
                </div>
            </div>
        </div>

        <div class="help-section">
            <h3>ğŸ’¡ ä½¿ã„æ–¹</h3>
            <ul>
                <li><strong>print()</strong>: æ–‡å­—åˆ—ã‚„å€¤ã‚’å‡ºåŠ›ã—ã¾ã™</li>
                <li><strong>input()</strong>: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®å…¥åŠ›ã‚’å—ã‘å–ã‚Šã¾ã™</li>
                <li><strong>å¤‰æ•°</strong>: name = "å€¤" ã§å¤‰æ•°ã‚’å®šç¾©ã§ãã¾ã™</li>
                <li><strong>è¨ˆç®—</strong>: +, -, *, / ãªã©ã®æ¼”ç®—å­ãŒä½¿ãˆã¾ã™</li>
                <li><strong>ç¹°ã‚Šè¿”ã—</strong>: foræ–‡ã‚„whileæ–‡ãŒä½¿ãˆã¾ã™</li>
            </ul>
        </div>
    </div>

    <!-- CodeMirror CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/material-darker.min.css">
    
    <script>
        let pyodide = null;
        let inputQueue = [];
        let isWaitingForInput = false;
        let inputResolver = null;
        let codeEditor = null;

        // CodeMirrorã®èª­ã¿è¾¼ã¿ã¨åˆæœŸåŒ–
        async function initCodeEditor() {
            try {
                // CodeMirrorã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èª­ã¿è¾¼ã¿
                await loadScript('https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js');
                await loadScript('https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js');
                await loadScript('https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/closebrackets.min.js');
                await loadScript('https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/matchbrackets.min.js');
                await loadScript('https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/selection/active-line.min.js');
                
                // CodeMirrorã‚¨ãƒ‡ã‚£ã‚¿ã‚’åˆæœŸåŒ–
                const editorElement = document.getElementById('code-editor');
                codeEditor = CodeMirror(editorElement, {
                    value: `print("Hello, Python!")
print("1 + 1 =", 1 + 1)

name = input("ã‚ãªãŸã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„: ")
print("ã“ã‚“ã«ã¡ã¯ã€" + name + "ã•ã‚“!")

for i in range(3):
    print("ã‚«ã‚¦ãƒ³ãƒˆ:", i)`,
                    mode: 'python',
                    theme: 'material-darker',
                    lineNumbers: true,
                    indentUnit: 4,
                    indentWithTabs: false,
                    autoCloseBrackets: true,
                    matchBrackets: true,
                    styleActiveLine: true,
                    lineWrapping: true,
                    viewportMargin: Infinity,
                    extraKeys: {
                        "Ctrl-Enter": function(cm) {
                            runCode();
                        },
                        "Tab": function(cm) {
                            // Tabã‚­ãƒ¼ã§ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ
                            if (cm.somethingSelected()) {
                                cm.indentSelection("add");
                            } else {
                                cm.replaceSelection("    "); // 4ã‚¹ãƒšãƒ¼ã‚¹
                            }
                        },
                        "Shift-Tab": function(cm) {
                            // Shift+Tabã§ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆè§£é™¤
                            cm.indentSelection("subtract");
                        }
                    }
                });
                
                // ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚µã‚¤ã‚ºã‚’å¼·åˆ¶çš„ã«èª¿æ•´
                setTimeout(() => {
                    const isMobile = window.innerWidth <= 768;
                    const height = isMobile ? 350 : 400;
                    codeEditor.setSize(null, height);
                    codeEditor.refresh();
                }, 100);
                
                // ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒªã‚µã‚¤ã‚ºæ™‚ã«é«˜ã•ã‚’å†èª¿æ•´
                window.addEventListener('resize', () => {
                    setTimeout(() => {
                        const isMobile = window.innerWidth <= 768;
                        const height = isMobile ? 350 : 400;
                        codeEditor.setSize(null, height);
                        codeEditor.refresh();
                    }, 100);
                });
                
                console.log('CodeMirror editor initialized');
                
            } catch (error) {
                console.error('Failed to initialize CodeMirror:', error);
                // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: é€šå¸¸ã®textareaã‚’ä½¿ç”¨
                document.getElementById('code-editor').innerHTML = '<textarea id="fallback-editor" style="width:100%;height:400px;font-family:monospace;"></textarea>';
            }
        }

        // ã‚¹ã‚¯ãƒªãƒ—ãƒˆèª­ã¿è¾¼ã¿ç”¨ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        // Pyodideã®èª­ã¿è¾¼ã¿
        async function loadPyodide() {
            try {
                const statusElement = document.getElementById('python-status');
                const outputArea = document.getElementById('output-area');
                
                statusElement.textContent = 'Pythonã‚¨ãƒ³ã‚¸ãƒ³ã‚’åˆæœŸåŒ–ä¸­...';
                
                // Pyodideã‚’CDNã‹ã‚‰èª­ã¿è¾¼ã¿
                if (!window.loadPyodide) {
                    await loadScript('https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js');
                }

                statusElement.textContent = 'Pythonç’°å¢ƒã‚’æ§‹ç¯‰ä¸­...';

                // Pyodideã‚’åˆæœŸåŒ–ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«ã®loadPyodideé–¢æ•°ã‚’ä½¿ç”¨ï¼‰
                pyodide = await window.loadPyodide({
                    indexURL: "https://cdn.jsdelivr.net/pyodide/v0.24.1/full/",
                    stdout: (text) => {
                        appendOutput(text, 'stdout');
                    },
                    stderr: (text) => {
                        appendOutput(text, 'stderr');
                    }
                });

                console.log('Pyodide loaded successfully');

                // inputé–¢æ•°ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰
                pyodide.runPython(`
import builtins
from js import prompt

def custom_input(prompt_text=""):
    result = prompt(str(prompt_text))
    return result if result is not None else ""

# çµ„ã¿è¾¼ã¿ã®inputé–¢æ•°ã‚’ç½®ãæ›ãˆ
builtins.input = custom_input
                `);

                statusElement.textContent = 'âœ… Pythonæº–å‚™å®Œäº†';
                outputArea.innerHTML = '<div class="ready">Pythonç’°å¢ƒãŒæº–å‚™ã§ãã¾ã—ãŸï¼ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</div>';
                
                // å®Ÿè¡Œãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
                document.getElementById('run-btn').disabled = false;
                
            } catch (error) {
                console.error('Pyodideèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:', error);
                const statusElement = document.getElementById('python-status');
                const outputArea = document.getElementById('output-area');
                statusElement.textContent = 'âŒ èª­ã¿è¾¼ã¿å¤±æ•—';
                outputArea.innerHTML = `<div class="error">Pythonã‚¨ãƒ³ã‚¸ãƒ³ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚<br>ã‚¨ãƒ©ãƒ¼: ${error.message}<br>ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</div>`;
            }
        }

        // å‡ºåŠ›ã‚¨ãƒªã‚¢ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’è¿½åŠ 
        function appendOutput(text, type = 'stdout') {
            const outputArea = document.getElementById('output-area');
            if (outputArea.querySelector('.loading') || outputArea.querySelector('.ready')) {
                outputArea.innerHTML = '';
            }
            
            const outputLine = document.createElement('div');
            outputLine.className = `output-line ${type}`;
            outputLine.textContent = text;
            outputArea.appendChild(outputLine);
            outputArea.scrollTop = outputArea.scrollHeight;
        }

        // ã‚³ãƒ¼ãƒ‰å®Ÿè¡Œ
        async function runCode() {
            if (!pyodide) {
                appendOutput('Pythonã‚¨ãƒ³ã‚¸ãƒ³ãŒã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„ã€‚', 'stderr');
                return;
            }

            // CodeMirrorã¾ãŸã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚¨ãƒ‡ã‚£ã‚¿ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
            let code;
            if (codeEditor) {
                code = codeEditor.getValue().trim();
            } else {
                const fallbackEditor = document.getElementById('fallback-editor');
                code = fallbackEditor ? fallbackEditor.value.trim() : '';
            }
            
            if (!code) {
                appendOutput('å®Ÿè¡Œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚', 'stderr');
                return;
            }

            const outputArea = document.getElementById('output-area');
            const runBtn = document.getElementById('run-btn');
            
            // å‡ºåŠ›ã‚¨ãƒªã‚¢ã‚’ã‚¯ãƒªã‚¢
            outputArea.innerHTML = '';
            appendOutput('ğŸ”„ å®Ÿè¡Œä¸­...', 'info');
            runBtn.disabled = true;

            try {
                // ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œ
                const result = await pyodide.runPythonAsync(code);
                
                // çµæœãŒã‚ã‚‹å ´åˆã¯è¡¨ç¤º
                if (result !== undefined && result !== null && result !== '') {
                    appendOutput(`çµæœ: ${result}`, 'info');
                }
                
                // å®Ÿè¡Œå®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                setTimeout(() => {
                    appendOutput('âœ… å®Ÿè¡Œå®Œäº†', 'info');
                }, 100);
                
            } catch (error) {
                console.error('Pythonå®Ÿè¡Œã‚¨ãƒ©ãƒ¼:', error);
                appendOutput(`ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'stderr');
            } finally {
                runBtn.disabled = false;
            }
        }

        // ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã®æŒ¿å…¥
        function insertSampleCode() {
            const samples = [
                '# åŸºæœ¬çš„ãªè¨ˆç®—\\nprint("=== è¨ˆç®—ã®ä¾‹ ===")\\nprint("10 + 5 =", 10 + 5)\\nprint("10 - 3 =", 10 - 3)\\nprint("4 * 6 =", 4 * 6)\\nprint("15 / 3 =", 15 / 3)',

                '# å¤‰æ•°ã¨æ–‡å­—åˆ—\\nprint("=== å¤‰æ•°ã®ä¾‹ ===")\\nname = "å¤ªéƒ"\\nage = 16\\nprint(f"åå‰: {name}")\\nprint(f"å¹´é½¢: {age}æ­³")\\nprint(f"{name}ã•ã‚“ã¯{age}æ­³ã§ã™")',

                '# ç¹°ã‚Šè¿”ã—å‡¦ç†\\nprint("=== ç¹°ã‚Šè¿”ã—ã®ä¾‹ ===")\\nfor i in range(5):\\n    print(f"ã‚«ã‚¦ãƒ³ãƒˆ: {i}")\\n\\nprint("\\nå¶æ•°ã®è¡¨ç¤º:")\\nfor i in range(10):\\n    if i % 2 == 0:\\n        print(f"{i}ã¯å¶æ•°")',

                '# ãƒªã‚¹ãƒˆã®æ“ä½œ\\nprint("=== ãƒªã‚¹ãƒˆã®ä¾‹ ===")\\nfruits = ["ã‚Šã‚“ã”", "ãƒãƒŠãƒŠ", "ã‚ªãƒ¬ãƒ³ã‚¸"]\\nprint("æœç‰©ãƒªã‚¹ãƒˆ:", fruits)\\n\\nfruits.append("ã¶ã©ã†")\\nprint("è¿½åŠ å¾Œ:", fruits)\\n\\nfor fruit in fruits:\\n    print(f"- {fruit}")',

                '# é–¢æ•°ã®å®šç¾©\\nprint("=== é–¢æ•°ã®ä¾‹ ===")\\ndef greet(name):\\n    return f"ã“ã‚“ã«ã¡ã¯ã€{name}ã•ã‚“!"\\n\\ndef add_numbers(a, b):\\n    return a + b\\n\\nprint(greet("èŠ±å­"))\\nprint(f"5 + 3 = {add_numbers(5, 3)}")',
            ];

            const randomSample = samples[Math.floor(Math.random() * samples.length)];
            const formattedCode = randomSample.replace(/\\n/g, '\n');
            
            if (codeEditor) {
                codeEditor.setValue(formattedCode);
            } else {
                const fallbackEditor = document.getElementById('fallback-editor');
                if (fallbackEditor) {
                    fallbackEditor.value = formattedCode;
                }
            }
        }

        // ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ã‚¯ãƒªã‚¢
        function clearCode() {
            if (codeEditor) {
                codeEditor.setValue('');
            } else {
                const fallbackEditor = document.getElementById('fallback-editor');
                if (fallbackEditor) {
                    fallbackEditor.value = '';
                }
            }
            document.getElementById('output-area').innerHTML = '<div class="ready">ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦å®Ÿè¡Œãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</div>';
        }

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('DOM loaded, starting CodeMirror and Pyodide initialization...');
            
            // CodeMirrorã‚¨ãƒ‡ã‚£ã‚¿ã‚’åˆæœŸåŒ–
            await initCodeEditor();
            
            // Pyodideã‚’èª­ã¿è¾¼ã¿
            loadPyodide().catch(error => {
                console.error('Failed to load Pyodide:', error);
                const statusElement = document.getElementById('python-status');
                const outputArea = document.getElementById('output-area');
                statusElement.textContent = 'âŒ èª­ã¿è¾¼ã¿å¤±æ•—';
                outputArea.innerHTML = `<div class="error">Pythonã‚¨ãƒ³ã‚¸ãƒ³ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚<br>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã—ã¦ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚<br>è©³ç´°: ${error.message}</div>`;
            });

            // ãƒœã‚¿ãƒ³ã‚¤ãƒ™ãƒ³ãƒˆ
            document.getElementById('run-btn').addEventListener('click', runCode);
            document.getElementById('clear-btn').addEventListener('click', clearCode);
            document.getElementById('example-btn').addEventListener('click', insertSampleCode);
        });
    </script>

    <style>
        .python-playground {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .playground-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .playground-header h1 {
            color: #2563eb;
            margin-bottom: 10px;
        }

        .playground-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 15px;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid #2563eb;
            flex-wrap: wrap;
            gap: 10px;
        }

        .section-header h3 {
            margin: 0;
            color: #1e293b;
            font-size: clamp(1rem, 2.5vw, 1.25rem);
            white-space: nowrap;
        }

        .controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }

        .status {
            font-size: 14px;
            color: #64748b;
        }

        #code-editor-container {
            width: 100%;
            height: 400px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
            transition: border-color 0.3s;
            display: flex;
            flex-direction: column;
        }

        #code-editor-container:focus-within {
            border-color: #2563eb;
        }

        /* CodeMirrorã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
        .CodeMirror {
            height: 400px !important;
            font-family: 'Monaco', 'Menlo', 'Consolas', 'Liberation Mono', 'Courier New', monospace;
            font-size: 16px; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã‚ºãƒ¼ãƒ ã‚’é˜²ããŸã‚16pxä»¥ä¸Šã« */
            line-height: 1.5;
            border-radius: 6px;
            flex: 1;
            -webkit-text-size-adjust: 100%; /* Webkitç³»ã§ã®ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ã‚’é˜²ã */
        }

        .CodeMirror-scroll {
            min-height: 400px !important;
        }

        .CodeMirror-lines {
            padding: 4px 0;
        }

        .CodeMirror-focused .CodeMirror-cursor {
            border-left: 2px solid #2563eb;
        }

        .CodeMirror-selected {
            background: rgba(37, 99, 235, 0.2);
        }

        .CodeMirror-line::selection, 
        .CodeMirror-line > span::selection, 
        .CodeMirror-line > span > span::selection {
            background: rgba(37, 99, 235, 0.2);
        }

        /* ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #fallback-editor {
            width: 100%;
            height: 400px;
            padding: 15px;
            border: none;
            outline: none;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 16px; /* ãƒ¢ãƒã‚¤ãƒ«ã§ã‚ºãƒ¼ãƒ ã‚’é˜²ããŸã‚16pxä»¥ä¸Šã« */
            line-height: 1.5;
            resize: vertical;
            -webkit-text-size-adjust: 100%; /* Webkitç³»ã§ã®ãƒ†ã‚­ã‚¹ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ã‚’é˜²ã */
        }

        #output-area {
            height: 400px;
            padding: 15px;
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .output-line {
            margin-bottom: 4px;
        }

        .output-line.stderr {
            color: #ef4444;
        }

        .output-line.info {
            color: #10b981;
        }

        .loading, .ready {
            color: #64748b;
            font-style: italic;
            text-align: center;
            padding: 20px;
        }

        .error {
            color: #ef4444;
            padding: 20px;
            text-align: center;
        }

        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            font-size: clamp(0.75rem, 1.8vw, 0.875rem);
            white-space: nowrap;
            min-width: fit-content;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary {
            background: #2563eb;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #1d4ed8;
        }

        .btn-secondary {
            background: #64748b;
            color: white;
        }

        .btn-secondary:hover {
            background: #475569;
        }

        .help-section {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #10b981;
        }

        .help-section h3 {
            color: #1e293b;
            margin-bottom: 15px;
        }

        .help-section ul {
            list-style: none;
            padding: 0;
        }

        .help-section li {
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .help-section li:last-child {
            border-bottom: none;
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
        @media (max-width: 768px) {
            .playground-content {
                grid-template-columns: 1fr;
            }
            
            .section-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
            }
            
            .section-header h3 {
                font-size: 1.1rem;
            }
            
            .controls {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
                gap: 6px;
                width: 100%;
            }
            
            .btn {
                padding: 10px 8px;
                font-size: 0.8rem;
            }
            
            #code-editor-container {
                height: 350px;
            }
            
            .CodeMirror {
                height: 350px !important;
            }
            
            .CodeMirror-scroll {
                min-height: 350px !important;
            }
            
            #output-area {
                height: 350px;
            }
        }

        @media (max-width: 480px) {
            .controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .btn {
                padding: 12px 6px;
                font-size: 0.75rem;
            }
        }
    </style>
</Layout>