<!-- 宛先選択ダイアログ -->
<div class="destination-dialog-overlay" id="destination-dialog-overlay" style="display: none;">
    <div class="destination-dialog" id="destination-dialog">
        <div class="dialog-header">
            <span id="destination-dialog-title">通信先を選択</span>
        </div>
        <div class="dialog-content">
        <div class="form-group">
            <label class="form-label">送信元</label>
            <div id="source-device-info" style="padding: 8px; background: #f0f9ff; border-radius: 4px; margin-bottom: 16px;">
                <strong id="source-device-name">PC-1</strong>
                <span id="source-device-ip" style="color: #666; margin-left: 8px;">(192.168.1.100)</span>
            </div>
        </div>
        
        <div class="form-group">
            <label class="form-label">宛先の指定方法</label>
            <div style="display: flex; gap: 16px; margin-bottom: 16px;">
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="radio" name="destination-type" value="ip" checked style="margin-right: 8px;">
                    IPアドレスで指定
                </label>
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="radio" name="destination-type" value="hostname" style="margin-right: 8px;">
                    ホスト名で指定
                </label>
            </div>
        </div>

        <!-- IPアドレス直接入力 -->
        <div class="form-group" id="ip-address-section">
            <label class="form-label" for="destination-ip">宛先IPアドレス</label>
            <input type="text" class="form-input" id="destination-ip" placeholder="192.168.1.1">
        </div>

        <!-- ホスト名選択 -->
        <div class="form-group" id="hostname-section" style="display: none;">
            <label class="form-label" for="destination-hostname">宛先ホスト名</label>
            <select class="form-input" id="destination-hostname">
                <option value="">-- ホスト名を選択 --</option>
                <!-- デバイス名が動的に挿入される -->
            </select>
            <div id="resolved-ip" style="margin-top: 8px; padding: 8px; background: #f8fafc; border-radius: 4px; display: none;">
                <small style="color: #666;">解決されるIPアドレス: <strong id="resolved-ip-value"></strong></small>
            </div>
        </div>

        <!-- DNS解決状況表示 -->
        <div id="dns-resolution-status" style="margin-top: 16px; padding: 8px; border-radius: 4px; display: none;">
            <small id="dns-status-text"></small>
        </div>

        <div class="dialog-buttons">
            <button class="dialog-button secondary" id="destination-cancel-btn">キャンセル</button>
            <button class="dialog-button primary" id="destination-ok-btn">実行</button>
        </div>
    </div>
</div>

<style>
.destination-dialog-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.destination-dialog {
    position: relative;
    background: white;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    z-index: 1002;
    width: 400px;
    max-width: 90vw;
    margin: auto;
}

.destination-dialog .dialog-header {
    background: #2196f3;
    color: white;
    padding: 16px;
    border-radius: 8px 8px 0 0;
    font-weight: bold;
}

.destination-dialog .dialog-content {
    padding: 20px;
}

.destination-dialog .form-group {
    margin-bottom: 16px;
}

.destination-dialog .form-label {
    display: block;
    margin-bottom: 6px;
    font-weight: 500;
    color: #333;
}

.destination-dialog .form-input {
    width: 100%;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
    box-sizing: border-box;
}

.destination-dialog .dialog-buttons {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
    margin-top: 20px;
}

.destination-dialog .dialog-button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
}

.destination-dialog .dialog-button.primary {
    background: #2196f3;
    color: white;
}

.destination-dialog .dialog-button.secondary {
    background: #f5f5f5;
    color: #666;
}

.destination-dialog .dialog-button:hover {
    opacity: 0.9;
}
</style>