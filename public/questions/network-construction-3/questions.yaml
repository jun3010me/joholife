id: network-construction-3
title: ネットワーク構築課題③
description: 複数LANセグメントによるネットワーク構築課題
icon: 🌐
difficulty: hard
estimatedTime: 30
category: "ネットワーク構築"
tags:
  - "ネットワーク設計"
  - "DHCP設定"
  - "LAN分割"
  - "スイッチ接続"
  - "複数セグメント"

# この課題は通常の選択式問題ではなく、ファイル操作による実習形式です
questions:
  - id: network_construction_3
    type: file-upload
    title: 複数LANセグメントのネットワーク構築
    description: |
      **課題概要**

      以下の要件を満たすネットワーク構成を作成してください。

      **ネットワーク要件**
      - ルーター1台（LAN1とLAN2でDHCP有効）
      - スイッチ2台（スイッチ-1、スイッチ-2）
      - PC4台（PC-1、PC-2、PC-3、PC-4）

      **接続要件**
      - スイッチ-1をルーターのLAN1ポートに接続
      - スイッチ-2をルーターのLAN2ポートに接続
      - PC-1とPC-2をスイッチ-1に接続
      - PC-3とPC-4をスイッチ-2に接続
      - すべてのPCでDHCP有効、スイッチは適切なセグメントでIP設定

      **IPアドレス設定要件**
      - LAN1セグメント: 192.168.1.0/24（DHCP範囲: 192.168.1.100-199）
      - LAN2セグメント: 192.168.2.0/24（DHCP範囲: 192.168.2.100-199）
      - PC-1、PC-2: 192.168.1.xのIPアドレスを取得
      - PC-3、PC-4: 192.168.2.xのIPアドレスを取得
      - スイッチ-1: 192.168.1.xのIPアドレスを設定
      - スイッチ-2: 192.168.2.xのIPアドレスを設定

      **解決手順**
      1. ネットワークシミュレータで上記構成を作成
      2. ルーターのLAN1・LAN2でDHCPを有効化し、適切なIP範囲を設定
      3. すべてのPCでDHCPを有効化してIPアドレスを自動取得
      4. スイッチは手動で適切なIPアドレスを設定
      5. 構成ファイルを保存し、JSONファイルをアップロード

      **評価ポイント**
      - 正しいトポロジ（接続関係）の構築
      - 適切なLANセグメントへの配置
      - DHCPによる自動IP割り当ての動作
      - IPアドレスの適切な分離（LAN1とLAN2で異なるセグメント）

    validation: |
      function validateNetwork(networkData) {
        const { devices, connections } = networkData;

        const routers = devices.filter(d => d.type === 'router');
        const switches = devices.filter(d => d.type === 'switch');
        const pcs = devices.filter(d => d.type === 'pc');

        if (routers.length !== 1) {
          return { valid: false, message: 'ルーターが1台ではありません' };
        }
        if (switches.length !== 2) {
          return { valid: false, message: 'スイッチが2台ではありません' };
        }
        if (pcs.length !== 4) {
          return { valid: false, message: 'PCが4台ではありません' };
        }

        const router = routers[0];

        if (!router.config.lan1.dhcpEnabled) {
          return { valid: false, message: 'ルーターのLAN1でDHCPを有効化してください' };
        }
        if (!router.config.lan2.dhcpEnabled) {
          return { valid: false, message: 'ルーターのLAN2でDHCPを有効化してください' };
        }

        for (const pc of pcs) {
          if (!pc.config.dhcpEnabled) {
            return { valid: false, message: pc.name + 'でDHCPを有効化してください' };
          }
        }

        const pc1 = pcs.find(p => p.name === 'PC-1');
        const pc2 = pcs.find(p => p.name === 'PC-2');
        const pc3 = pcs.find(p => p.name === 'PC-3');
        const pc4 = pcs.find(p => p.name === 'PC-4');
        const switch1 = switches.find(s => s.name === 'スイッチ-1');
        const switch2 = switches.find(s => s.name === 'スイッチ-2');

        if (pc1 && !pc1.config.ipAddress.startsWith('192.168.1.')) {
          return { valid: false, message: 'PC-1は192.168.1.xからIPアドレスを取得してください' };
        }
        if (pc2 && !pc2.config.ipAddress.startsWith('192.168.1.')) {
          return { valid: false, message: 'PC-2は192.168.1.xからIPアドレスを取得してください' };
        }
        if (pc3 && !pc3.config.ipAddress.startsWith('192.168.2.')) {
          return { valid: false, message: 'PC-3は192.168.2.xからIPアドレスを取得してください' };
        }
        if (pc4 && !pc4.config.ipAddress.startsWith('192.168.2.')) {
          return { valid: false, message: 'PC-4は192.168.2.xからIPアドレスを取得してください' };
        }
        if (switch1 && !switch1.config.ipAddress.startsWith('192.168.1.')) {
          return { valid: false, message: 'スイッチ-1は192.168.1.xにIPアドレスを設定してください' };
        }
        if (switch2 && !switch2.config.ipAddress.startsWith('192.168.2.')) {
          return { valid: false, message: 'スイッチ-2は192.168.2.xにIPアドレスを設定してください' };
        }

        if (connections.length < 6) {
          return { valid: false, message: '接続数が不足しています' };
        }

        return { valid: true, message: '全ての条件を満たしています' };
      }

    points: 150
    difficulty: hard
    tags:
      - "ネットワーク構築"
      - "DHCP設定"
      - "LAN設計"
      - "複数セグメント"
    explanation: |
      **解答解説**
      
      この課題では、複数のLANセグメントを持つネットワークの構築を学習しました。
      
      **構成のポイント:**
      1. **ルーターの役割**: 複数のLANセグメントを管理し、それぞれでDHCPサービスを提供
      2. **スイッチの配置**: 各LANセグメントにスイッチを配置してポート数を拡張
      3. **IPアドレス管理**: セグメントごとに異なるIPアドレス範囲を設定
      
      **学習ポイント:**
      - **LAN分割の意義**: セキュリティ向上、トラフィック分散、管理の簡素化
      - **DHCP設定**: 各LANごとに適切なIP範囲の設定
      - **ネットワーク設計**: 要件に応じたトポロジの設計
      
      **実際の現場では:**
      - 部署別、用途別でのLAN分割
      - VLAN（仮想LAN）技術の活用
      - セキュリティポリシーに基づいたセグメント設計
      - ルーティング設定による通信制御
      
      **発展課題:**
      このネットワークに以下を追加することを考えてみましょう：
      - インターネット接続
      - セグメント間の通信制御
      - VLANを使った論理的な分割
      - ファイアウォール設定