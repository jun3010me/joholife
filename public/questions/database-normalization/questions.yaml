id: database-normalization
title: データベース正規化課題①
description: データベース正規化シミュレータでCSVを正規化し、完成したJSONファイルをアップロードして、正規化が正しく行われているかを判定します
icon: 🗄️
difficulty: medium
estimatedTime: 30
category: データベース
tags:
  - データベース
  - 正規化
  - テーブル設計
  - シミュレータ
questions:
  - id: library-normalization
    type: file-upload
    title: 図書館貸出管理データの正規化
    description: |
      **課題内容**

      図書館の貸出管理システムのデータを第3正規形まで正規化してください。

      **配布ファイル**
      - [normalization-1.csv](/database-normalization/normalization-1.csv)をダウンロードしてください

      **正規化の手順**
      1. データベース正規化シミュレータ（/database-simulator）を開く
      2. 「リセット」ボタンを押して初期状態にする
      3. 「CSV読込」ボタンを押し、ダウンロードしたnormalization-1.csvを読み込む
      4. 列を適切なテーブルに移動して正規化を行う
      5. 完成したら「保存」ボタンでJSONファイルをダウンロード
      6. このページにJSONファイルをアップロードして判定

      **正規化の要件**
      - 貸出トランザクションテーブル（貸出ID、貸出日、返却予定日、会員ID、書籍ID、貸出状態）
      - 会員マスタテーブル（会員ID、会員名、会員電話番号、会員住所）
      - 書籍マスタテーブル（書籍ID、書籍名、著者名、出版社、ISBN、分類）
      - 各テーブルには適切な主キーが設定されていること
      - テーブル間に適切なリレーションが設定されていること

      **判定条件**
      - 3つのテーブルが存在する
      - 各テーブルに適切な列が配置されている
      - 主キーが正しく設定されている（テーブル名は問わない）
      - データの整合性が保たれている
    explanation: |
      この課題では、非正規化された図書館貸出管理データを第3正規形まで正規化しました。

      **正規化のポイント**

      **第1正規形（1NF）**
      - すべてのカラムが原子値（分割できない値）であること
      - 繰り返しグループがないこと

      **第2正規形（2NF）**
      - 1NFを満たしていること
      - 部分関数従属を排除すること
      - 主キーの一部だけに従属する列がないこと

      **第3正規形（3NF）**
      - 2NFを満たしていること
      - 推移的関数従属を排除すること
      - 主キー以外のキーに従属する列がないこと

      **今回の正規化**

      元のデータには以下の問題がありました：
      - 会員情報（会員名、電話番号、住所）が貸出レコードごとに重複
      - 書籍情報（書籍名、著者名、出版社、ISBN、分類）が貸出レコードごとに重複
      - データの更新異常（会員の電話番号変更時に複数レコードを更新する必要）
      - データの削除異常（貸出履歴を削除すると書籍情報も消える）
      - データの挿入異常（貸出がない書籍や会員の情報を登録できない）

      正規化後の構造：

      **貸出トランザクションテーブル**
      - 主キー: 貸出ID
      - 外部キー: 会員ID、書籍ID
      - 属性: 貸出日、返却予定日、貸出状態

      **会員マスタテーブル**
      - 主キー: 会員ID
      - 属性: 会員名、会員電話番号、会員住所

      **書籍マスタテーブル**
      - 主キー: 書籍ID
      - 属性: 書籍名、著者名、出版社、ISBN、分類

      この正規化により：
      - データの重複がなくなり、ストレージ効率が向上
      - 更新・削除・挿入の異常が解消
      - データの整合性が保証される
      - 各エンティティが独立して管理できる
    difficulty: medium
    points: 20
    tags:
      - 第3正規形
      - テーブル設計
      - 主キー
      - 外部キー
